<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>记录一些方法实现。 | 十月</title>
    <meta name="generator" content="VuePress 1.4.1">
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="/docs/utils/utils.js"></script>
    <link rel="icon" href="/docs/images/7.png">
    <meta name="description" content="vuepress博客">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="full-screen" content="true">
    <meta name="x5-fullscreen" content="true">
    <meta name="360-fullscreen" content="true">
    <link rel="preload" href="/docs/assets/css/0.styles.4581c035.css" as="style"><link rel="preload" href="/docs/assets/js/app.496b0931.js" as="script"><link rel="preload" href="/docs/assets/js/2.f90869d3.js" as="script"><link rel="preload" href="/docs/assets/js/24.a9d72343.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.4e260648.js"><link rel="prefetch" href="/docs/assets/js/11.c7faf0dc.js"><link rel="prefetch" href="/docs/assets/js/12.e2e451d7.js"><link rel="prefetch" href="/docs/assets/js/13.0bca2749.js"><link rel="prefetch" href="/docs/assets/js/14.e9248f0f.js"><link rel="prefetch" href="/docs/assets/js/15.891e4394.js"><link rel="prefetch" href="/docs/assets/js/16.e00288bc.js"><link rel="prefetch" href="/docs/assets/js/17.1a83ea74.js"><link rel="prefetch" href="/docs/assets/js/18.c007769d.js"><link rel="prefetch" href="/docs/assets/js/19.ba43cd67.js"><link rel="prefetch" href="/docs/assets/js/20.8b01c1c8.js"><link rel="prefetch" href="/docs/assets/js/21.9e67312b.js"><link rel="prefetch" href="/docs/assets/js/22.b41c324e.js"><link rel="prefetch" href="/docs/assets/js/23.52d4b090.js"><link rel="prefetch" href="/docs/assets/js/25.4e243327.js"><link rel="prefetch" href="/docs/assets/js/26.786162a2.js"><link rel="prefetch" href="/docs/assets/js/27.f9a5939b.js"><link rel="prefetch" href="/docs/assets/js/28.a50fece0.js"><link rel="prefetch" href="/docs/assets/js/29.ddc7618f.js"><link rel="prefetch" href="/docs/assets/js/3.edb5e83a.js"><link rel="prefetch" href="/docs/assets/js/30.274da36f.js"><link rel="prefetch" href="/docs/assets/js/31.de01ef66.js"><link rel="prefetch" href="/docs/assets/js/32.699dd8b4.js"><link rel="prefetch" href="/docs/assets/js/33.b65b59da.js"><link rel="prefetch" href="/docs/assets/js/34.7281d86e.js"><link rel="prefetch" href="/docs/assets/js/35.71f8e7df.js"><link rel="prefetch" href="/docs/assets/js/36.f9ffcd58.js"><link rel="prefetch" href="/docs/assets/js/37.944918a2.js"><link rel="prefetch" href="/docs/assets/js/38.ec811ecb.js"><link rel="prefetch" href="/docs/assets/js/39.d39702a2.js"><link rel="prefetch" href="/docs/assets/js/4.af1ff500.js"><link rel="prefetch" href="/docs/assets/js/40.f0b6f971.js"><link rel="prefetch" href="/docs/assets/js/41.f6b18c0a.js"><link rel="prefetch" href="/docs/assets/js/42.e6e82b74.js"><link rel="prefetch" href="/docs/assets/js/43.fd9d0a1a.js"><link rel="prefetch" href="/docs/assets/js/5.2d8eeb88.js"><link rel="prefetch" href="/docs/assets/js/6.0e82c544.js"><link rel="prefetch" href="/docs/assets/js/7.30be3a2a.js"><link rel="prefetch" href="/docs/assets/js/8.d653075e.js"><link rel="prefetch" href="/docs/assets/js/9.022925d2.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.4581c035.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/images/7.png" alt="十月" class="logo"> <span class="site-name can-hide">十月</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/blog/" class="nav-link router-link-exact-active router-link-active">
  技术博客
</a></div><div class="nav-item"><a href="/docs/JavaScript/" class="nav-link">
  Js
</a></div><div class="nav-item"><a href="/docs/jQuery/" class="nav-link">
  jQuery
</a></div><div class="nav-item"><a href="/docs/css/" class="nav-link">
  html+css
</a></div><div class="nav-item"><a href="/docs/ts/" class="nav-link">
  ts
</a></div><div class="nav-item"><a href="/docs/Vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/docs/React/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/docs/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/docs/wx/" class="nav-link">
  wx
</a></div><div class="nav-item"><a href="/docs/http/" class="nav-link">
  网络
</a></div><div class="nav-item"><a href="/docs/myComponents/" class="nav-link">
  封装组件
</a></div><div class="nav-item"><a href="/docs/utils/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="https://github.com/lovebabyqi/Components" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/blog/" class="nav-link router-link-exact-active router-link-active">
  技术博客
</a></div><div class="nav-item"><a href="/docs/JavaScript/" class="nav-link">
  Js
</a></div><div class="nav-item"><a href="/docs/jQuery/" class="nav-link">
  jQuery
</a></div><div class="nav-item"><a href="/docs/css/" class="nav-link">
  html+css
</a></div><div class="nav-item"><a href="/docs/ts/" class="nav-link">
  ts
</a></div><div class="nav-item"><a href="/docs/Vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/docs/React/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/docs/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/docs/wx/" class="nav-link">
  wx
</a></div><div class="nav-item"><a href="/docs/http/" class="nav-link">
  网络
</a></div><div class="nav-item"><a href="/docs/myComponents/" class="nav-link">
  封装组件
</a></div><div class="nav-item"><a href="/docs/utils/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="https://github.com/lovebabyqi/Components" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/blog/" class="active sidebar-link">记录一些方法实现。</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#_1-函数防抖节流" class="sidebar-link">1. 函数防抖节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#场景" class="sidebar-link">场景</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_1-防抖" class="sidebar-link">1. 防抖</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_2-节流" class="sidebar-link">2. 节流</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#总结" class="sidebar-link">总结:</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_2-封装方法" class="sidebar-link">2. 封装方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#_2-1-深拷贝函数" class="sidebar-link">2.1 深拷贝函数</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_2-2-实现object-create" class="sidebar-link">2.2 实现Object.create()</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_2-3-模拟instanceof" class="sidebar-link">2.3 模拟instanceof</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_2-4-数组方法封装" class="sidebar-link">2.4 数组方法封装</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_3-赋值运算符理解" class="sidebar-link">3. 赋值运算符理解</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_4-封装call，apply，bind" class="sidebar-link">4. 封装call，apply，bind</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#_4-1-call" class="sidebar-link">4.1 call()</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_4-2-apply" class="sidebar-link">4.2 apply</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_4-3-bind" class="sidebar-link">4.3 bind</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_5-模拟vue事件车" class="sidebar-link">5. 模拟Vue事件车</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_6-vscode配置模板" class="sidebar-link">6. vscode配置模板</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_7-异步任务理解" class="sidebar-link">7. 异步任务理解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#_7-1-任务队列" class="sidebar-link">7.1 任务队列</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_7-2-宏任务" class="sidebar-link">7.2 宏任务</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_7-3-微任务" class="sidebar-link">7.3 微任务</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_7-4-运行机制" class="sidebar-link">7.4 运行机制</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_7-5-promise和async中的立即执行" class="sidebar-link">7.5 Promise和async中的立即执行</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_7-6-await做了什么" class="sidebar-link">7.6 await做了什么</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_8-创建对象的多种方法" class="sidebar-link">8. 创建对象的多种方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#_8-1-字面量创建对象" class="sidebar-link">8.1 字面量创建对象</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_8-2-object-create-方法" class="sidebar-link">8.2 Object.create( )方法</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_8-3-new-操作符创建实例化对象" class="sidebar-link">8.3 new 操作符创建实例化对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_9-函数模拟new操作符功能" class="sidebar-link">9. 函数模拟new操作符功能</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_10-图片懒加载实现" class="sidebar-link">10. 图片懒加载实现</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_11-object方法" class="sidebar-link">11. Object方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#_11-1-object-keys" class="sidebar-link">11.1 Object.keys()</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_11-2-object-values" class="sidebar-link">11.2 Object.values()</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_11-3-object-entries" class="sidebar-link">11.3 Object.entries()</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_11-4-object-assign" class="sidebar-link">11.4 Object.assign()</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_11-5-object-defineproperty" class="sidebar-link">11.5 Object.defineProperty()</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_12-parseint补充" class="sidebar-link">12. parseInt补充</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_13-mock函数占位符" class="sidebar-link">13. mock函数占位符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#name占位符" class="sidebar-link">name占位符</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#基础占位符" class="sidebar-link">基础占位符</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#date占位符" class="sidebar-link">date占位符</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#image占位符" class="sidebar-link">image占位符</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#其他占位符" class="sidebar-link">其他占位符</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_14-数据绑定视图" class="sidebar-link">14. 数据绑定视图</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_15-promise的特点" class="sidebar-link">15. Promise的特点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#_15-1-promise的特点" class="sidebar-link">15.1 Promise的特点</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_15-2-实现promise-then" class="sidebar-link">15.2 实现Promise.then</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_16-算法排序" class="sidebar-link">16. 算法排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#数据准备" class="sidebar-link">数据准备</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#交换值" class="sidebar-link">交换值</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#一-冒泡排序" class="sidebar-link">一.冒泡排序</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#二-选择排序" class="sidebar-link">二.选择排序</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#三-插入排序" class="sidebar-link">三.插入排序</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#四-归并排序" class="sidebar-link">四.归并排序</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#五-快速排序" class="sidebar-link">五.快速排序</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_17-sort排序" class="sidebar-link">17. sort排序</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_18-settimeout模拟setinterval" class="sidebar-link">18. setTimeout模拟setInterval</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#_18-1-简介" class="sidebar-link">18.1 简介</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_18-2-知识储备" class="sidebar-link">18.2 知识储备</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_18-3-setinterval缺点-与-settimeout" class="sidebar-link">18.3 setInterval缺点 与 setTimeout</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_18-4-settimeout模拟setinterval" class="sidebar-link">18.4 setTimeout模拟setInterval</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_19-设计模式" class="sidebar-link">19. 设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/#_1-什么是设计模式" class="sidebar-link">1.什么是设计模式?</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_2-基本概念" class="sidebar-link">2.基本概念</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_3-单例模式" class="sidebar-link">3. 单例模式</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_4-工厂模式" class="sidebar-link">4. 工厂模式</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_5-建造者模式" class="sidebar-link">5. 建造者模式</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_6-原型模式" class="sidebar-link">6. 原型模式</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_7-策略模式" class="sidebar-link">7. 策略模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/#_20-分时函数" class="sidebar-link">20. 分时函数</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_21-完整节流" class="sidebar-link">21. 完整节流</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_22-js字符串与二进制相互转换" class="sidebar-link">22. js字符串与二进制相互转换</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_23-jsconfig-ison文件介绍" class="sidebar-link">23. jsconfig.ison文件介绍</a></li><li class="sidebar-sub-header"><a href="/docs/blog/#_24-hygen模板模板生成器配置" class="sidebar-link">24. hygen模板模板生成器配置</a></li></ul></li><li><a href="/docs/blog/V8及javaScript进阶.html" class="sidebar-link">V8引擎，javaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/V8及javaScript进阶.html#纲要" class="sidebar-link">纲要</a></li><li class="sidebar-sub-header"><a href="/docs/blog/V8及javaScript进阶.html#v8是如何执行一段javascript代码的" class="sidebar-link">V8是如何执行一段JavaScript代码的</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/V8及javaScript进阶.html#_1-1-主要核心流程分为两步-编译和执行" class="sidebar-link">1.1 主要核心流程分为两步 – 编译和执行</a></li><li class="sidebar-sub-header"><a href="/docs/blog/V8及javaScript进阶.html#_1-2-高级代码为什么需要先编译再执行？" class="sidebar-link">1.2 高级代码为什么需要先编译再执行？</a></li><li class="sidebar-sub-header"><a href="/docs/blog/V8及javaScript进阶.html#_1-3-v8执行js代码的具体流程" class="sidebar-link">1.3 V8执行JS代码的具体流程</a></li></ul></li></ul></li><li><a href="/docs/blog/vue进阶.html" class="sidebar-link">vue进阶，面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/vue进阶.html#_1-vue是如何对数组方法进行变异的？例如push，pop，splice等方法。" class="sidebar-link">1. vue是如何对数组方法进行变异的？例如push，pop，splice等方法。</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/vue进阶.html#_1-1-为什么要对数组进行单独处理" class="sidebar-link">1.1 为什么要对数组进行单独处理</a></li><li class="sidebar-sub-header"><a href="/docs/blog/vue进阶.html#_1-2-具体如何处理的" class="sidebar-link">1.2 具体如何处理的</a></li><li class="sidebar-sub-header"><a href="/docs/blog/vue进阶.html#_1-3-存在问题" class="sidebar-link">1.3 存在问题</a></li></ul></li></ul></li><li><a href="/docs/blog/git.html" class="sidebar-link">git版本管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_1-git基础操作" class="sidebar-link">1. git基础操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_1-1-添加提交操作" class="sidebar-link">1.1 添加提交操作</a></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_1-2-查看状态，版本" class="sidebar-link">1.2 查看状态，版本</a></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_1-3-撤销操作" class="sidebar-link">1.3 撤销操作</a></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_1-4-版本回退" class="sidebar-link">1.4 版本回退</a></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_1-5-删除操作" class="sidebar-link">1.5 删除操作</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_2-git关联远程仓库" class="sidebar-link">2. git关联远程仓库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_2-1-创建sshkey" class="sidebar-link">2.1 创建sshkey</a></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_2-2-关联远程仓库" class="sidebar-link">2.2 关联远程仓库</a></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_2-3-仓库上的代码克隆到本地：" class="sidebar-link">2.3 仓库上的代码克隆到本地：</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_3-git分支" class="sidebar-link">3. git分支</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_3-1-分支操作" class="sidebar-link">3.1 分支操作</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_4-其他补充" class="sidebar-link">4. 其他补充</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_4-1-git临时储存功能" class="sidebar-link">4.1 git临时储存功能</a></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_4-2-添加新功能，创建新分支" class="sidebar-link">4.2 添加新功能，创建新分支</a></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_4-3-多人协作" class="sidebar-link">4.3 多人协作</a></li><li class="sidebar-sub-header"><a href="/docs/blog/git.html#_4-4-git提交后，首页不显示绿点记录" class="sidebar-link">4.4 git提交后，首页不显示绿点记录</a></li></ul></li></ul></li><li><a href="/docs/blog/gulp.html" class="sidebar-link">gulp构建项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#gulp3" class="sidebar-link">gulp3</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_1-gulp配置文件" class="sidebar-link">1. gulp配置文件</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_2-常用glup插件" class="sidebar-link">2. 常用glup插件</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_3-重要api" class="sidebar-link">3. 重要API</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_4-实例" class="sidebar-link">4. 实例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_4-1-合并js" class="sidebar-link">4.1 合并js</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_4-3-编译less" class="sidebar-link">4.3 编译less</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_4-4-打包css" class="sidebar-link">4.4 打包css</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_4-5-默认任务" class="sidebar-link">4.5 默认任务</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_4-6-task注意事项" class="sidebar-link">4.6 task注意事项</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_4-7-处理html-压缩" class="sidebar-link">4.7 处理html(压缩)</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_4-8-半自动进行项目构建" class="sidebar-link">4.8 半自动进行项目构建</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_4-9-全自动进行项目构建" class="sidebar-link">4.9 全自动进行项目构建</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#gulp4" class="sidebar-link">gulp4</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_1-合并js" class="sidebar-link">1. 合并js</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_2-编译less" class="sidebar-link">2. 编译less</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_3-打包css" class="sidebar-link">3. 打包css</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_4-处理html-压缩" class="sidebar-link">4. 处理html(压缩)</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_5-默认任务" class="sidebar-link">5. 默认任务</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_6-半自动构建" class="sidebar-link">6. 半自动构建</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_7-全自动构建" class="sidebar-link">7. 全自动构建</a></li><li class="sidebar-sub-header"><a href="/docs/blog/gulp.html#_8-package-json" class="sidebar-link">8. package.json</a></li></ul></li></ul></li><li><a href="/docs/blog/webpack.html" class="sidebar-link">webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_1-安装使用" class="sidebar-link">1. 安装使用</a></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_2-webpack作用" class="sidebar-link">2. webpack作用</a></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_3-常见loader" class="sidebar-link">3. 常见loader</a></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_4-打包css文件" class="sidebar-link">4. 打包css文件</a></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_5-配置多页打包" class="sidebar-link">5. 配置多页打包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#多页打包" class="sidebar-link">多页打包</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_6-devserver" class="sidebar-link">6. devServer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_6-1-前台5000，后台3000。" class="sidebar-link">6.1 前台5000，后台3000。</a></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_6-2-前台5000，无后台，用devserver模拟响应数据。" class="sidebar-link">6.2 前台5000，无后台，用devServer模拟响应数据。</a></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_6-3-webpack是运行在node环境中的-可以用后台代码启动wenpack配置文件" class="sidebar-link">6.3 webpack是运行在node环境中的,可以用后台代码启动wenpack配置文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_7-webpack解析vue" class="sidebar-link">7. webpack解析Vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_7-1-解析vue" class="sidebar-link">7.1 解析Vue</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_8-babel" class="sidebar-link">8. babel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_8-1-babel使用" class="sidebar-link">8.1 babel使用</a></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_8-2-插件" class="sidebar-link">8.2 插件</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#_9-webpack配置文件分离" class="sidebar-link">9. webpack配置文件分离</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blog/webpack.html#webpack-merge开发环境生产环境配置分离，合并多个配置文件。" class="sidebar-link">webpack-merge开发环境生产环境配置分离，合并多个配置文件。</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="记录一些方法实现。"><a href="#记录一些方法实现。" class="header-anchor">#</a> 记录一些方法实现。</h1> <h2 id="_1-函数防抖节流"><a href="#_1-函数防抖节流" class="header-anchor">#</a> 1. 函数防抖节流</h2> <p>函数防抖，函数节流，听起来非常厉害，其实厉害的不是他的功能，也不是他的名字，而是他的设计思想，要学的也是他的设计思想。</p> <h3 id="场景"><a href="#场景" class="header-anchor">#</a> 场景</h3> <p>在进行窗口的resize、scroll，输入框内容校验等操作时，如果事件处理函数调用的频率无限制，会加重浏览器的负担，导致用户体验非常糟糕。此时我们可以采用**debounce（防抖）<strong>和</strong>throttle（节流）**的方式来减少调用频率，同时又不影响实际效果。</p> <h3 id="_1-防抖"><a href="#_1-防抖" class="header-anchor">#</a> 1. 防抖</h3> <p><strong>当持续触发事件时，一定时间段内没有再触发事件，事件处理函数才会执行一次，如果设定的时间到来之前，又一次触发了事件，就重新开始延时。</strong></p> <p>持续触发scroll事件时，并不执行handle函数，当1000毫秒内没有触发scroll事件时，才会延时触发scroll事件。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span>time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 创建一个标记用来存放定时器的返回值</span>
	<span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//每次当滚动的时候，把前一个定时器清除</span>
		<span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 然后创建一个新的 setTimeout，</span>
		<span class="token comment">// 这样就能保证滚动触发后的 interval 间隔内</span>
		<span class="token comment">// 如果用户还滚动了的话，就不会执行 fn 函数</span>
		timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 处理函数</span>
<span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token comment">// 滚动事件</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token function">debounce</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-节流"><a href="#_2-节流" class="header-anchor">#</a> 2. 节流</h3> <p><strong>当持续触发事件时，保证一定时间段内只调用一次事件处理函数。</strong></p> <p>持续触发scroll事件时，并不立即执行handle函数，每隔1000毫秒才会执行一次handle函数。</p> <h4 id="_1-时间戳节流"><a href="#_1-时间戳节流" class="header-anchor">#</a> 1. 时间戳节流</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> prev <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//let prev = 0	//让初始时间为0,可以确保第一次正常执行</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token keyword">var</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> prev <span class="token operator">&gt;=</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            prev <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//可以让prev = now 两种写法误差几乎不计,减少一次Date.now()</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-定时器节流"><a href="#_2-定时器节流" class="header-anchor">#</a> 2. 定时器节流</h4> <p>当触发事件的时候，我们设置一个定时器，再次触发事件的时候，如果定时器存在，就不执行，直到delay时间后，定时器执行执行函数，并且清空定时器，这样就可以设置下个定时器。当第一次触发事件时，不会立即执行函数，而是在delay秒后才执行。而后再怎么频繁触发事件，也都是每delay时间才执行一次。当最后一次停止触发后，由于定时器的delay延迟，可能还会执行一次函数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结:</h3> <p>**函数防抖：**将几次操作合并为一此操作进行。原理是维护一个计时器，规定在delay时间后触发函数，但是在delay时间内再次触发的话，就会取消之前的计时器而重新设置。这样一来，只有最后一次操作能被触发。</p> <p>**函数节流：**使得一定时间内只触发一次函数。原理是通过判断是否到达一定时间来触发函数。</p> <h2 id="_2-封装方法"><a href="#_2-封装方法" class="header-anchor">#</a> 2. 封装方法</h2> <h3 id="_2-1-深拷贝函数"><a href="#_2-1-深拷贝函数" class="header-anchor">#</a> 2.1 深拷贝函数</h3> <p>浅拷贝：Object.assign()拷贝的是属性值。假如源对象的属性值是一个对象的引用，那么它也只拷贝那个引用。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
扩展运算符 <span class="token operator">...</span>
</code></pre></div><p>深拷贝：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>函数递归实现。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//深拷贝函数</span>
<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">newObj<span class="token punctuation">,</span>oldObj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> oldObj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token comment">// console.log(k)</span>
        <span class="token keyword">let</span> item <span class="token operator">=</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        	<span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        	<span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        	newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> item
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span><span class="token string">'andy'</span><span class="token punctuation">,</span>
    msg<span class="token operator">:</span><span class="token punctuation">{</span>age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    likeColor<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'pink'</span><span class="token punctuation">,</span><span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">deepCopy</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>obj<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>obj<span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-2-实现object-create"><a href="#_2-2-实现object-create" class="header-anchor">#</a> 2.2 实现Object.create()</h3> <p>Object.create()方法，接收一个对象作为参数，创建对象，创建的对象隐式原型指向参数对象的显示原型</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function-variable function">myCreate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> xxx <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    xxx<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> obj<span class="token punctuation">;</span>
    <span class="token keyword">return</span> xxx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'xiaoxiannv'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">myCreate</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-3-模拟instanceof"><a href="#_2-3-模拟instanceof" class="header-anchor">#</a> 2.3 模拟instanceof</h3> <p>A instanceof B</p> <p>作用:</p> <p>1.判断对象A的原型链上有没有构造函数B的显示原型</p> <p>2.如果A是原始值,直接返回false</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span>		<span class="token comment">//false</span>
<span class="token comment">//{} 的原型链 Object.prototype</span>
<span class="token comment">//Array的显示原型	Array.proptype</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span>		<span class="token comment">//true</span>
<span class="token comment">//[] 的原型链 Array.prototype</span>
<span class="token comment">//Array的显示原型	Array.proptype</span>
</code></pre></div><p>用模拟函数实现</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myInstanceof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>obj<span class="token punctuation">,</span>Fn<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token operator">!==</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//如果传入的数据是原始值,直接返回false</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>value<span class="token operator">=</span>obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        obj <span class="token operator">=</span> value
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">myInstanceof</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>Object<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-4-数组方法封装"><a href="#_2-4-数组方法封装" class="header-anchor">#</a> 2.4 数组方法封装</h3> <h4 id="_2-4-1-foreach"><a href="#_2-4-1-foreach" class="header-anchor">#</a> 2.4.1 forEach</h4> <p>遍历数组，传递一个回调函数，对数组的每一项执行一次回调函数操作</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myForEach</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span>	<span class="token comment">//第三个参数可以传数组本身,在这里是this</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">myForEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>index<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-2-filter"><a href="#_2-4-2-filter" class="header-anchor">#</a> 2.4.2 filter</h4> <p>过滤,遍历数组，创建一个新数组,该新数组包含源数组通过提供回调函数测试的所有元素.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myFilter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>	<span class="token comment">//回调函数执行有返回值,说明符合回调函数条件//第三个参数可选</span>
            _arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> _arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">myFilter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//result	[5,4,8,5]</span>
</code></pre></div><h4 id="_2-4-3-map"><a href="#_2-4-3-map" class="header-anchor">#</a> 2.4.3 map</h4> <p>map方法，创建一个新数组,该新数组包含源数组的每一项执行回调函数的结果</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myMap</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        _arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第三个参数可选</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> _arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">myMap</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> item<span class="token operator">*</span><span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-4-reduce聚合"><a href="#_2-4-4-reduce聚合" class="header-anchor">#</a> 2.4.4 reduce聚合</h4> <p>arr.reduce(reducer,initValue)</p> <p>reducer函数接收4个参数(pre,next,index,数组本身)</p> <p>pre上次reducer函数的返回值，next当前循环的项，index可选(当前项的索引),第四个参数数组本身</p> <p>特点：initValue不传，reducer函数执行<strong>arr.length-1</strong>圈</p> <p>传递initValue，可以为任意数据类型，作为第一次pre的值，reducer执行<strong>arr.length</strong>圈</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myReduce</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cb<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token operator">||</span>value<span class="token operator">===</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            value <span class="token operator">=</span> <span class="token function">cb</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            value <span class="token operator">=</span> <span class="token function">cb</span><span class="token punctuation">(</span>i<span class="token operator">===</span><span class="token number">0</span><span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">:</span>value<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">myReduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> pre <span class="token operator">+</span> next<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-5-数组去重"><a href="#_2-4-5-数组去重" class="header-anchor">#</a> 2.4.5 数组去重</h4> <p>去重之所以Array.prototype没有，就是因为去重要根据实际数据结构实现。</p> <p><strong>数组中每一项都是原始值</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">'st'</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'st'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
</code></pre></div><p>1.利用Set数据结构特点实现数组去重</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">uniqe</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">'st'</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'st'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">uniqe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//newArr	[2,5,8,'st',6]</span>
</code></pre></div><p>2.利用reduce方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">uniqe</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>pre<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           pre<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> pre<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">'st'</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'st'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">uniqe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//newArr	[2,5,8,'st',6]</span>
</code></pre></div><p>3.indexOF,lastIndexOf方法</p> <p>indexOf返回查询参数所在数组索引位置,从左往右</p> <p>lastIndexOf返回查询参数所在数组索引位置,从右往左,索引仍然是正常索引,只是检索时从右边开始</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">uniqe</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//找到的索引不等,即该项重复了</span>
            <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//将最后一项赋值到重复项位置,避免删除某项,造成数组项前移</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token operator">--</span><span class="token punctuation">;</span><span class="token comment">//length--,删除最后一项</span>
            i<span class="token operator">--</span><span class="token punctuation">;</span><span class="token comment">//前面操作将最后一项放到了重复项位置,i--防止跳过该项</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">'st'</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'st'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">uniqe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//newArr [2,5,8,'st',6]</span>
</code></pre></div><p><strong>针对数组每一项都是对象的</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'xiaoxiannv'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">21</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'Andy'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'Andy'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">17</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'Jane'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'SuperMan'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//基于某个属性进行去重</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">uniqe</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prop</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>next<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>next<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span>
            pre<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> pre<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-4-6-数组扁平化"><a href="#_2-4-6-数组扁平化" class="header-anchor">#</a> 2.4.6 数组扁平化</h4> <p>一维数组[1,2,3,4,5]，多维数组[,1,2,3,[4,5,[6],7],8]</p> <p>多维数组转化为一维数组就是数组扁平化</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>
</code></pre></div><p>扁平化方法很多</p> <p>**1. arr.flat(Initfinty )**方法会按照一个可指定的深度递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//接收一个参数描述数组深度,默认为1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token comment">//[1, 2, 3, 4, 5, 6, 7, 8]</span>
</code></pre></div><p><strong>2. toSring()降维变成字符串	.split(','),逗号分割转为数组	 再将每一项转为数字.map(Number)</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr3 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span>
</code></pre></div><p><strong>3. JSON.stringify() 再用正则去掉方括号	<code>str.replace(/\[|\]/g,'')</code></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr4 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\[|\]/g</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span>
</code></pre></div><p><strong>4. [ ].concat(...arr)</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myFlat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span>isArray<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        _this <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>_this<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> _this<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>5. reduce</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myFlat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_arr<span class="token punctuation">,</span>item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//如果item不是数组,直接push</span>
            _arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            _arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>item<span class="token punctuation">.</span><span class="token function">myFlat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果是数组,进行递归方法类似深拷贝</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> _arr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-赋值运算符理解"><a href="#_3-赋值运算符理解" class="header-anchor">#</a> 3. 赋值运算符理解</h2> <p><strong>1.赋值运算符的作用是把等号右侧的值给左侧的变量</strong></p> <p><strong>2.并且该赋值运算返回的结果是等号右侧的值</strong></p> <p><em>示例1:</em></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span>a<span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">var</span> b
a<span class="token operator">:</span><span class="token number">1</span>	<span class="token punctuation">,</span>	b<span class="token operator">:</span><span class="token keyword">undefined</span>
b <span class="token operator">=</span>  <span class="token number">2</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">undefined</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token number">2</span><span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">]</span>是<span class="token keyword">undefined</span>
第二个等号赋值给<span class="token keyword">undefined</span><span class="token punctuation">,</span>有返回结果<span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
然后把返回结果赋值给b
因此b<span class="token operator">:</span><span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre></div><p><em>示例2:</em></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>n<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>	<span class="token comment">//地址1</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a		<span class="token comment">//地址1</span>
a<span class="token punctuation">.</span>n <span class="token operator">=</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>m<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>	<span class="token comment">//地址2 	.运算符优先级19比赋值运算符高</span>
<span class="token comment">//所以理解为:地址1需要添加n属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//第一步	地址1需要添加n属性</span>
<span class="token comment">//第二步	a--&gt;地址2	{m:1}	并且该赋值运算符返回值啊地址2</span>
<span class="token comment">//第三步	地址1.n= {m:1}	地址1{n:{m:1}}</span>
<span class="token comment">//第三行第一个等号左侧由于.运算符优先级高,所以左侧的a还是地址1</span>
a<span class="token operator">:</span><span class="token punctuation">{</span>m<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
b<span class="token operator">:</span><span class="token punctuation">{</span>n<span class="token operator">:</span><span class="token punctuation">{</span>m<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-封装call，apply，bind"><a href="#_4-封装call，apply，bind" class="header-anchor">#</a> 4. 封装call，apply，bind</h2> <h3 id="_4-1-call"><a href="#_4-1-call" class="header-anchor">#</a> 4.1 call()</h3> <p>call方法作用:修改this,调用函数执行,传递参数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>context<span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token comment">//console.log(this,context,args)</span>
    <span class="token comment">//this指向test函数,context是obj,args接收到的参数数组</span>
    context <span class="token operator">=</span> context <span class="token operator">||</span> window<span class="token punctuation">;</span><span class="token comment">//不传参,或传null,指向window</span>
    context<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>xxx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token comment">//将test函数添加到obj的对象原型</span>
    context<span class="token punctuation">.</span><span class="token function">xxx</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//通过obj调用test方法,this指向了obj//args是数组,扩展运算传递</span>
    <span class="token keyword">delete</span> context<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>xxx<span class="token punctuation">;</span><span class="token comment">//删除对象原型上的过渡方法</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'Andy'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">18</span>
<span class="token punctuation">}</span>
test<span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
test<span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
test<span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-2-apply"><a href="#_4-2-apply" class="header-anchor">#</a> 4.2 apply</h3> <p>apply方法:修改this,调用函数,传递数组作为参数</p> <p>同call相似,区别在于传递的参数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>context<span class="token punctuation">,</span>args<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    args <span class="token operator">=</span> args <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//不传参args应该是空数组,避免...args报错</span>
    context <span class="token operator">=</span> context <span class="token operator">||</span> window<span class="token punctuation">;</span>
    context<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>xxx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">xxx</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> context<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>xxx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'Andy'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">18</span>
<span class="token punctuation">}</span>
test<span class="token punctuation">.</span><span class="token function">myApply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
test<span class="token punctuation">.</span><span class="token function">myApply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
test<span class="token punctuation">.</span><span class="token function">myApply</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-3-bind"><a href="#_4-3-bind" class="header-anchor">#</a> 4.3 bind</h3> <p>bind方法:修改this指向,不会自动执行函数,返回一个新函数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>context<span class="token punctuation">,</span><span class="token operator">...</span>outterArgs<span class="token punctuation">]</span> <span class="token operator">=</span> arguments
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>innerArgs</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token operator">...</span>outterArgs<span class="token punctuation">,</span><span class="token operator">...</span>innerArgs<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'Andy'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">18</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> test1 <span class="token operator">=</span> test<span class="token punctuation">.</span><span class="token function">myBind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test1</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> test2 <span class="token operator">=</span> test<span class="token punctuation">.</span><span class="token function">myBind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test2</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> test3 <span class="token operator">=</span> test<span class="token punctuation">.</span><span class="token function">myBind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test3</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_5-模拟vue事件车"><a href="#_5-模拟vue事件车" class="header-anchor">#</a> 5. 模拟Vue事件车</h2> <h4 id="事件车对象"><a href="#事件车对象" class="header-anchor">#</a> 事件车对象</h4> <p>概念:</p> <p>1.事件车是一个对象.</p> <p>2.事件车上on方法绑定一个事件xxx,并且还有回调函数(<strong>此时未执行</strong>)</p> <p>3.事件车上emit方法触发一个事件xxx,(<strong>此时执行</strong>on绑定的xxx事件回调函数,传递参数)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">EventBus</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span>Fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//容错处理,重复绑定相同事件,只让第一次生效</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> Fn
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">emit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">[</span>type<span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用对应事件绑定的回调函数,修正this指向</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
bus<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
bus<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span><span class="token string">'传递的参数'</span><span class="token punctuation">,</span><span class="token string">'传递多个参数'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_6-vscode配置模板"><a href="#_6-vscode配置模板" class="header-anchor">#</a> 6. vscode配置模板</h2> <p>这里以配置vue模板为例</p> <p>文件--&gt;首选项--&gt;用户代码片段 找到vue.json，换行空串，空格缩进。</p> <p>prefix是使用模板的指令</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Print to console&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;&lt;template&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;    &lt;div class='$0'&gt;&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;&lt;/template&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;&lt;script&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;export default {&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;    name:'$1',&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;    data(){&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;        return {&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;            &quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;    },&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;    methods:{&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;        &quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;    },&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;&lt;/script&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;&lt;style scoped&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;    &quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;&lt;/style&gt;&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Log output to console&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>配置好之后新建<code>vue</code>,输入<code>vue+tab</code>就能快捷生成模板,刀乐0,刀乐1是生成后鼠标位置.</p> <p>注意：<strong><code>vue</code>指令可能会与其他指令名冲突,vscode识别不到</strong>。</p> <p>vue+tab生成模板不成功，tab以后变成其他指令，这时候需要更改vue文件语言模式。</p> <p>打开一个.vue文件，ctrl+shift+p 找到Change Language Mode，选择.vue的配置文件关联，找到vue关联成功。</p> <h2 id="_7-异步任务理解"><a href="#_7-异步任务理解" class="header-anchor">#</a> 7. 异步任务理解</h2> <h3 id="_7-1-任务队列"><a href="#_7-1-任务队列" class="header-anchor">#</a> 7.1 任务队列</h3> <p>首先我们需要明白以下几件事情：</p> <ul><li>JS分为同步任务和异步任务</li> <li>同步任务都在主线程上执行，形成一个执行栈</li> <li>主线程之外，事件触发线程管理着一个任务队列，只要异步任务有了运行结果，就在任务队列之中放置一个事件。</li> <li>一旦执行栈中的所有同步任务执行完毕（此时JS引擎空闲），系统就会读取任务队列，将可运行的异步任务添加到可执行栈中，开始执行。</li></ul> <p>根据规范，事件循环是通过任务队列的机制来进行协调的。一个 <code>Event Loop</code> 中，可以有一个或者多个任务队列(task queue)，一个任务队列便是一系列有序任务(task)的集合；<strong>每个任务都有一个任务源(task source)，源自同一个任务源的 task 必须放到同一个任务队列，从不同源来的则被添加到不同队列。</strong> <code>setTimeout/Promise</code> 等API便是任务源，而进入任务队列的是他们指定的具体执行任务。</p> <img src="/docs/images/任务队列.png" alt="任务队列"> <h3 id="_7-2-宏任务"><a href="#_7-2-宏任务" class="header-anchor">#</a> 7.2 宏任务</h3> <p>(macro)task（又称之为宏任务），可以理解是每次执行栈执行的代码就是一个宏任务（包括每次从事件队列中获取一个事件回调并放到执行栈中执行）。</p> <p>浏览器为了能够使得JS内部(macro)task与DOM任务能够有序的执行，<strong>会在一个(macro)task执行结束后，在下一个(macro)task 执行开始前，对页面进行重新渲染</strong>，流程如下：</p> <div class="language- extra-class"><pre class="language-text"><code>(macro)task-&gt;渲染-&gt;(macro)task-&gt;...
</code></pre></div><p><strong>(macro)task主要包含：<code>script(整体代码)、setTimeout、setInterval、I/O、UI交互事件、postMessage、MessageChannel、setImmediate</code>(Node.js 环境)</strong></p> <h3 id="_7-3-微任务"><a href="#_7-3-微任务" class="header-anchor">#</a> 7.3 微任务</h3> <p>microtask（又称为微任务），<strong>可以理解是在当前 task 执行结束后立即执行的任务</strong>。也就是说，在当前task任务后，下一个task之前，在渲染之前。</p> <p>所以它的响应速度相比setTimeout（setTimeout是task）会更快，因为无需等渲染。也就是说，在某一个macrotask执行完后，就会将在它执行期间产生的所有microtask都执行完毕（在渲染前）。</p> <p><strong>microtask主要包含：<code>Promise.then、MutaionObserver、process.nextTick</code>(Node.js 环境)</strong></p> <h3 id="_7-4-运行机制"><a href="#_7-4-运行机制" class="header-anchor">#</a> 7.4 运行机制</h3> <p>在事件循环中，每进行一次循环操作称为 tick，每一次 tick 的任务处理模型]是比较复杂的，但关键步骤如下：</p> <ul><li>执行一个宏任务（栈中没有就从事件队列中获取）</li> <li>执行过程中如果遇到微任务，就将它添加到微任务的任务队列中</li> <li>宏任务执行完毕后，立即执行当前微任务队列中的所有微任务（依次执行）</li> <li>当前宏任务执行完毕，开始检查渲染，然后GUI线程接管渲染</li> <li>渲染完毕后，JS线程继续接管，开始下一个宏任务（从事件队列中获取）</li></ul> <p>流程图如下：</p> <img src="/docs/images/执行栈流程图.jpg" alt="流程图"> <h3 id="_7-5-promise和async中的立即执行"><a href="#_7-5-promise和async中的立即执行" class="header-anchor">#</a> 7.5 Promise和async中的立即执行</h3> <p>我们知道Promise中的异步体现在<code>then</code>和<code>catch</code>中，所以写在Promise中的代码是被当做同步任务立即执行的。而在async/await中，在出现await出现之前，其中的代码也是立即执行的。那么出现了<code>await</code>时候发生了什么呢？</p> <h3 id="_7-6-await做了什么"><a href="#_7-6-await做了什么" class="header-anchor">#</a> 7.6 await做了什么</h3> <p>从字面意思上看await就是等待，<code>await</code> 等待的是一个表达式，这个表达式的返回值可以是一个<code>promise</code>对象也可以是其他值。</p> <p>很多人以为await会一直等待之后的表达式执行完之后才会继续执行后面的代码，<strong>实际上<code>await</code>是一个让出线程的标志。<code>await</code>后面的表达式会先执行一遍，将await后面的代码加入到<code>microtask</code>中，然后就会跳出整个<code>async</code>函数来执行后面的代码。</strong></p> <p>浏览器端，同步任务执行完，才会执行异步，异步顺序,微任务早于宏任务。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//同步</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//  进入异步微任务队列01 这句代码会包裹在async2的then回调中,成为异步</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//同步</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//	同步</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//   进入异步宏任务队列01</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'6'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//同步   </span>
	<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'7'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//     进入异步微任务队列02</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">//	同步</span>
<span class="token comment">//41368275</span>
</code></pre></div><h2 id="_8-创建对象的多种方法"><a href="#_8-创建对象的多种方法" class="header-anchor">#</a> 8. 创建对象的多种方法</h2> <h3 id="_8-1-字面量创建对象"><a href="#_8-1-字面量创建对象" class="header-anchor">#</a> 8.1 字面量创建对象</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'Andy'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">18</span>
<span class="token punctuation">}</span>
</code></pre></div><p>字面量形式生成对象,该对象的对象原型指向Object.prototype</p> <h3 id="_8-2-object-create-方法"><a href="#_8-2-object-create-方法" class="header-anchor">#</a> 8.2 Object.create( )方法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">'Toy'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">17</span>
<span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token comment">//{}</span>
</code></pre></div><p>Object.create( )方法生成的是空对象,这个空对象的对象原型指向参数对象obj2</p> <h3 id="_8-3-new-操作符创建实例化对象"><a href="#_8-3-new-操作符创建实例化对象" class="header-anchor">#</a> 8.3 new 操作符创建实例化对象</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span>age
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span><span class="token string">'18'</span><span class="token punctuation">)</span>
<span class="token comment">//obj3是实例化对象,该对象的对象原型指向构造函数Star.prototype</span>
</code></pre></div><h2 id="_9-函数模拟new操作符功能"><a href="#_9-函数模拟new操作符功能" class="header-anchor">#</a> 9. 函数模拟new操作符功能</h2> <p>由于new是操作符，并不是函数方法，所以我们只能实现，模拟函数功能达到new类似效果。</p> <p><strong>new操作符作用:</strong></p> <p><strong>1.生成一个空对象.</strong></p> <p><strong>2.将构造函数内部的this指向该对象</strong></p> <p><strong>3.,执行构造函数里的方法,给这个对象添加属性和方法</strong></p> <p><strong>3.返回该对象</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>Fn<span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">]</span> <span class="token operator">=</span> arguments
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span><span class="token comment">//把obj的对象原型指向Fn的原型对象</span>
    <span class="token function">Fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> Andy <span class="token operator">=</span> <span class="token function">myNew</span><span class="token punctuation">(</span>Star<span class="token punctuation">,</span><span class="token string">'Andy'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_10-图片懒加载实现"><a href="#_10-图片懒加载实现" class="header-anchor">#</a> 10. 图片懒加载实现</h2> <p><strong>懒加载图片原理</strong></p> <p>​	1.给每个图片都设置自定义属性data-image 图片的真正地址</p> <p>​	2.页面滚动时,检测每个图片的位置.</p> <p>​		如果图片在浏览器的可视区域之内,那就取出图片的自定义属性,赋值给src,加载图片</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">'container'</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">''</span> data<span class="token operator">-</span>image<span class="token operator">=</span><span class="token string">''</span><span class="token operator">&gt;</span><span class="token operator">*</span><span class="token number">30</span>	<span class="token comment">//30假设30张图片    </span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p>img需要设置宽高,</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">html,body</span><span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span>500%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.container</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span>250px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.container img</span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span>inline-block<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span>darkgrey<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>初始化给图片添加data-image属性,监听滚动</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://47.100.98.54:9020/api/goods'</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token keyword">let</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.container img[data-image]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    imgs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        img<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>image <span class="token operator">=</span> result<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>picurl
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>lazyLoad<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//监听滚动</span>
<span class="token keyword">function</span> <span class="token function">lazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.container img[data-image]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//再次触发lazyLoad应该获取有data-image属性的节点,没有data-image,图片已经加载</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>imgs<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    imgs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">img</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> isIn <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">-</span> img<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//如果图片位置在浏览器可视区域内,就将data-image赋值给src加载图片</span>
        img<span class="token punctuation">.</span>src <span class="token operator">=</span> img<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>image
        img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>image
            <span class="token comment">// img.removeAttribute('data-image')</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> lazyLoad<span class="token punctuation">)</span>
</code></pre></div><h2 id="_11-object方法"><a href="#_11-object方法" class="header-anchor">#</a> 11. Object方法</h2> <h3 id="_11-1-object-keys"><a href="#_11-1-object-keys" class="header-anchor">#</a> 11.1 Object.keys()</h3> <p>返回值:一个表示给定对象的所有<strong>可枚举属性</strong>的字符串数组。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token comment">//obj要枚举属性的对象</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// console: ['0', '1', '2']</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'c'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// console: ['0', '1', '2']</span>
</code></pre></div><h3 id="_11-2-object-values"><a href="#_11-2-object-values" class="header-anchor">#</a> 11.2 Object.values()</h3> <p>方法返回一个给定对象自身的所有<strong>可枚举属性值</strong>的数组</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['bar', 42]</span>
</code></pre></div><h3 id="_11-3-object-entries"><a href="#_11-3-object-entries" class="header-anchor">#</a> 11.3 Object.entries()</h3> <p>方法返回一个给定对象自身可枚举属性的键值对数组</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ ['foo', 'bar'], ['baz', 42] ]</span>
</code></pre></div><p><strong>将Object转换为Map</strong>
new Map() 构造函数接受一个可迭代的entries。借助Object.entries方法你可以很容易的将Object转换为Map:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Map { foo: &quot;bar&quot;, baz: 42 }</span>
</code></pre></div><p><strong>分析</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'seven'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span>
obj<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'asd'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token comment">//{name:'seven',age:18,[object Object]:'asd'}</span>
</code></pre></div><p><strong>对象的属性名是字符串,不是字符串会隐式转换为字符串</strong></p> <h3 id="_11-4-object-assign"><a href="#_11-4-object-assign" class="header-anchor">#</a> 11.4 Object.assign()</h3> <p>合并对象,Object.assign()合并后的对象指向第一个参数对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>b<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> obj3 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span>obj2<span class="token punctuation">)</span>
obj3 <span class="token operator">===</span> obj1	<span class="token comment">//true</span>
</code></pre></div><p><strong>浅拷贝</strong>,Object.assign()拷贝的是属性值。假如源对象的属性值是一个对象的引用，那么它也只指向那个引用。</p> <p><strong>封装深拷贝</strong>(递归实现)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//深拷贝函数</span>
<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">newObj<span class="token punctuation">,</span>oldObj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> oldObj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token comment">// console.log(k)</span>
        item <span class="token operator">=</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        	<span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        	<span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        	newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> item
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span><span class="token string">'andy'</span><span class="token punctuation">,</span>
    msg<span class="token operator">:</span><span class="token punctuation">{</span>age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    likeColor<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'pink'</span><span class="token punctuation">,</span><span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">deepCopy</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>obj<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>obj<span class="token punctuation">)</span>
</code></pre></div><h3 id="_11-5-object-defineproperty"><a href="#_11-5-object-defineproperty" class="header-anchor">#</a> 11.5 Object.defineProperty()</h3> <p>字面量形式对象的特点</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span><span class="token string">'heaven'</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'海文'</span>     <span class="token comment">//可以重新赋值</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//可以枚举</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>name   <span class="token comment">//可以删除</span>
<span class="token comment">//obj name属性的特性  使用对象字面量形式声明的对象中  属性的特点</span>
<span class="token comment">//1.可以重新赋值</span>
<span class="token comment">//2.可以枚举</span>
<span class="token comment">//3.可以删除</span>
</code></pre></div><p><strong>Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>对象<span class="token punctuation">,</span>给对象添加<span class="token operator">/</span>修改的属性名<span class="token punctuation">,</span>属性描述符<span class="token punctuation">)</span>
</code></pre></div><p>属性描述符分为<strong>数据描述符</strong>和<strong>存取描述符</strong></p> <p><strong>1.数据描述符和存取描述符均具有</strong>以下可选键值(默认值是在使用Object.defineProperty()定义属性的情况下)：</p> <p>1.1<code>configurable</code></p> <p>当且仅当该属性的 configurable 为 true 时，该属性<code>描述符</code>才能够被改变，同时该属性也能从对应的对象上被删除。<strong>默认为 false</strong></p> <p>1.2<code>enumerable</code></p> <p>当且仅当该属性的<code>enumerable</code>为<code>true</code>时，该属性才能够出现在对象的枚举属性中。<strong>默认为 false</strong>。</p> <p>2.数据描述符</p> <p><strong>数据描述符同时具有以下可选键值</strong>：</p> <p>2.1<code>value</code></p> <p>该属性对应的值。可以是任何有效的 JavaScript 值（数值，对象，函数等）。<strong>默认为 undefined</strong>。</p> <p>2.2<code>writable</code></p> <p>当且仅当该属性的<code>writable</code>为<code>true</code>时，<code>value</code>才能被<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Assignment_Operators" target="_blank" rel="noopener noreferrer">赋值运算符<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>改变。<strong>默认为 false</strong>。</p> <p>3.存取描述符</p> <p><strong>存取描述符同时具有以下可选键值</strong>：</p> <p>3.1<code>get</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">get</span>  默认值 <span class="token keyword">undefined</span>
触发时间：获取对象的属性时触发
<span class="token keyword">this</span>指向：对象
回调函数的参数<span class="token operator">:</span>无参数
</code></pre></div><p><strong>默认为 undefined</strong>。</p> <p>3.2<code>set</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">set</span>  默认值 <span class="token keyword">undefined</span>
触发时间：给对象设置属性时触发
<span class="token keyword">this</span>指向：对象
回调函数的参数<span class="token operator">:</span>给对象设置属性时<span class="token punctuation">,</span>赋值运算符右侧的值。
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>	<span class="token comment">//注意属性名age是字符串</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getter'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">'18'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> newValue		<span class="token comment">//set设置的属性必须同上,不然不会触发</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{age:18}</span>
person<span class="token punctuation">.</span>age<span class="token comment">//	18</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span>	<span class="token comment">//20</span>
</code></pre></div><p>描述符可同时具有的键值</p> <table><thead><tr><th></th> <th style="text-align:center;">configurable</th> <th style="text-align:center;">enumerable</th> <th style="text-align:center;">value</th> <th style="text-align:center;">writable</th> <th style="text-align:center;">get</th> <th style="text-align:center;">set</th></tr></thead> <tbody><tr><td>数据描述符</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">No</td> <td style="text-align:center;">No</td></tr> <tr><td>存取描述符</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">No</td> <td style="text-align:center;">No</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">Yes</td></tr></tbody></table> <h2 id="_12-parseint补充"><a href="#_12-parseint补充" class="header-anchor">#</a> 12. parseInt补充</h2> <p><strong>parseInt(string, radix)</strong>   将一个字符串 string 转换为 radix 进制的整数， radix 为介于2-36之间的数。</p> <p>理解:string转换为一个radix进制的整数,<strong>radix参数为n 将会把第一个参数看作是一个数的n进制表示，而返回的值则是十进制</strong></p> <p>有很多特殊情况:参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt" target="_blank" rel="noopener noreferrer">MDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>示例:</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">parseint</span><span class="token punctuation">(</span><span class="token string">'22asd'</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>
<span class="token comment">//2*8^1 + 2*8^0 --&gt;18</span>
<span class="token operator">--</span><span class="token operator">&gt;</span><span class="token number">18</span>
</code></pre></div><p>parseInt会对string进行截取,<strong>从左往右,遇到非数或小数点即停止</strong>,字符串开头的空白符会被忽略</p> <p><code>'22asd'</code>截取到22</p> <p>18的8进制数为22</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//控制台中</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">1100</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>	<span class="token comment">//将2进制的1100转换为10 进制的数</span>
<span class="token operator">--</span><span class="token operator">&gt;</span><span class="token number">12</span>
</code></pre></div><p><strong>1.radix进制数只在2~36之间,不在范围内,直接返回NAN</strong></p> <p><strong>2.第二个参数radix不给,默认是10进制</strong></p> <p><strong>特例:radix进制数写个0 ,等价于10进制</strong></p> <p><strong>示例1</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>	<span class="token comment">//3</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>	<span class="token comment">//NaN</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>	<span class="token comment">//3</span>
</code></pre></div><p>经典</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'2'</span><span class="token punctuation">,</span><span class="token string">'3'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>parseInt<span class="token punctuation">)</span><span class="token punctuation">;</span>
map遍历数组<span class="token punctuation">,</span>parseInt接收到map的三个参数<span class="token punctuation">,</span> 项<span class="token punctuation">,</span>索引<span class="token punctuation">,</span>本身
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>	<span class="token comment">//1</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>	<span class="token comment">//NaN</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>	<span class="token comment">//NaN</span>
<span class="token number">1</span>	Nan <span class="token number">NaN</span>
</code></pre></div><h2 id="_13-mock函数占位符"><a href="#_13-mock函数占位符" class="header-anchor">#</a> 13. mock函数占位符</h2> <p><a href="http://mockjs.com/" target="_blank" rel="noopener noreferrer">mockjs官方文档地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <h3 id="name占位符"><a href="#name占位符" class="header-anchor">#</a> name占位符</h3> <p>@name   英文姓名      @first    英文姓       @last      英文名</p> <p>@cname    中文姓名    @cfirst    中文姓     @clast     中文名</p> <hr> <h3 id="基础占位符"><a href="#基础占位符" class="header-anchor">#</a> 基础占位符</h3> <p>@boolean   随机布尔值</p> <p>@natural         随机自然数</p> <p>@float            随机浮点数</p> <p>@charactor     随机单个字符</p> <p>@string       随机多个字符串</p> <p>@range(start,stop,step)           随机生成数组   默认0开始</p> <hr> <h3 id="date占位符"><a href="#date占位符" class="header-anchor">#</a> date占位符</h3> <p>@dateTime  随机的时间   年-月-日 时:分:秒</p> <p>@date          随机的时间  年-月-日</p> <p>@time          随机的时间  时:分:秒</p> <p>@nowTime  现在的时间  年-月-日 时:分:秒</p> <p>@now</p> <hr> <h3 id="image占位符"><a href="#image占位符" class="header-anchor">#</a> image占位符</h3> <p>@image(widthxheight,background,color,text)   随机创建图片的url地址</p> <hr> <h3 id="其他占位符"><a href="#其他占位符" class="header-anchor">#</a> 其他占位符</h3> <p>@color          随机颜色</p> <p>@paragraph      随机英文段落</p> <p>@cparagraph     随机中文段落</p> <p>@ip             随机ip</p> <p>@id                  随机id</p> <p>@region               随机区域    华中</p> <p>@province     随机省份</p> <p>@city（true）      随机城市    无参数  长沙市             有参数   湖南省  长沙市</p> <p>@county（true）随机县城 无参数  利辛市             有参数   安徽省  亳州市   利辛县</p> <h2 id="_14-数据绑定视图"><a href="#_14-数据绑定视图" class="header-anchor">#</a> 14. 数据绑定视图</h2> <p><strong>总觉得叫双向数据绑定，显得很浮夸。</strong></p> <p>1.修改数据可以改变视图</p> <p>2.视图改变可以修改数据（本质上也不是视图改变，input框数据本身也属于数据录入，还是相当于数据改变了视图）</p> <p><strong>思路:通过Object.fefineProperty()实现,将input框value,span标签innerText和obj.text做绑定</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'text'</span> id<span class="token operator">=</span><span class="token string">'_input'</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">'_span'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'text'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> _input<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">{</span>
         _span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> _input<span class="token punctuation">.</span>value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'初始数据'</span>	<span class="token comment">//初始化</span>
_input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span>text <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_15-promise的特点"><a href="#_15-promise的特点" class="header-anchor">#</a> 15. Promise的特点</h2> <h3 id="_15-1-promise的特点"><a href="#_15-1-promise的特点" class="header-anchor">#</a> 15.1 Promise的特点</h3> <p>当promise的状态是成功时,会触发所有then的第一个回调函数</p> <p>当promise的状态是失败时,会触发所有then的第二个回调函数</p> <p><strong>then</strong>函数返回也是一个promise</p> <p>​	值是执行的回掉函数的返回值</p> <p>​	<strong>状态默认是成功的,只有返回一个失败的promise,then返回的promise才是失败的</strong></p> <p><strong>触发then函数时,then函数是同步执行的,then的实参(回调函数)是异步的</strong></p> <p>​	<strong>promise的状态可以是成功</strong></p> <p>​	<strong>promise的状态可以是失败</strong></p> <p>​	<strong>promise的状态可以是待机</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise内部的代码'</span><span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'resolve'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token comment">//让promise失败</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'reject'</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>x<span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'resolve2'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'reject2'</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'同步代码'</span><span class="token punctuation">)</span>
</code></pre></div><p>控制台中打印</p> <img src="/docs/images/promise01.png" alt="promise"> <h3 id="_15-2-实现promise-then"><a href="#_15-2-实现promise-then" class="header-anchor">#</a> 15.2 实现Promise.then</h3> <p>promise特点:</p> <p>​	Promise状态成功时,会触发所有then的第一个回调函数</p> <p>​	Promise状态失败时,会触发所有then的第二个回调函数</p> <p>Promise可以有多个then函数,then函数也是一个Promise</p> <p>​	值是执行的回掉函数的返回值</p> <p>​	状态默认是成功的,只有then回调返回一个失败的Promise,then返回的Promise才是失败的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">MyPromise</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'pending'</span> <span class="token comment">//定义初始状态</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span>  <span class="token comment">//初始值</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//任务队列,存放then回调</span>
        <span class="token keyword">function</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>   <span class="token comment">//防止重复定义状态</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'resolved'</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">//延迟执行</span>
                <span class="token keyword">let</span> item <span class="token operator">=</span> <span class="token keyword">null</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    item<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">function</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'rejected'</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> error
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> item <span class="token operator">=</span> <span class="token keyword">null</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    item<span class="token punctuation">.</span><span class="token function">onReject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">cb</span><span class="token punctuation">(</span><span class="token function">resolve</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">reject</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onResolve<span class="token punctuation">,</span> onReject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> <span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token parameter">callBack</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">//根据then的回调函数,确定then函数返回的Promise状态</span>
                <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">callBack</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token function-variable function">onResolve</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">handle</span><span class="token punctuation">(</span>onResolve<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token function-variable function">onReject</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">handle</span><span class="token punctuation">(</span>onReject<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行观察:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'同步代码1'</span><span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'resolve1'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">error</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'reject1'</span><span class="token punctuation">,</span>error<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">122</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'resolve2'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">error</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'reject2'</span><span class="token punctuation">,</span>error<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">123</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'同步代码2'</span><span class="token punctuation">)</span>
</code></pre></div><img src="/docs/images/MyPromise执行测试.png" alt="promise"> <h2 id="_16-算法排序"><a href="#_16-算法排序" class="header-anchor">#</a> 16. 算法排序</h2> <h3 id="数据准备"><a href="#数据准备" class="header-anchor">#</a> 数据准备</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createArray</span><span class="token punctuation">(</span><span class="token parameter">length</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token operator">=</span>length<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        _arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> _arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token function">createArray</span><span class="token punctuation">(</span><span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr3 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr4 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr5 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr6 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr7 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr8 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr9 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr10 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="交换值"><a href="#交换值" class="header-anchor">#</a> 交换值</h3> <p>1.解构交换</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><p>2.中间变量交换</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
</code></pre></div><p><strong>实测效率：</strong></p> <p><strong>冒泡排序用中间变量的方法交换值效率更高，2W长度的数组冒泡排序，交换值方法快100ms~200ms左右。</strong></p> <p><strong>选择排序使用解构交换效率更高</strong></p> <h3 id="一-冒泡排序"><a href="#一-冒泡排序" class="header-anchor">#</a> 一.冒泡排序</h3> <p>冒泡排序算法，它是最慢的排序算法之一，但也是一种最容易实现的排序算法。</p> <p><strong>普通版：最简单(双层循环，比较，交换位置)</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bubbleSort1</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'标准冒泡排序运行时间'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> _arr1 <span class="token operator">=</span> <span class="token function">bubbleSort1</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'标准冒泡排序运行时间'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_arr1<span class="token punctuation">)</span>
</code></pre></div><p>普通优化版：<strong>(这版冒泡最快)</strong></p> <p>冒泡第一版优化，剩一个不用排，排过的不用再比。</p> <p>最后一个数<code>arr[length]</code>是和前一个数<code>arr[length-1]</code>比较的，最后一个数无需再次排序。内循环将<code>arr[j]</code>和<code>arr[j+1]</code>相邻两数比较，大的往右移动交换位置，第一圈外循环结束，已经找出<code>arr</code>中最大的数，放到<code>arr[length]</code>。所以内循环条件<code>-i</code><strong>表示排过的不再比</strong>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bubbleSort2</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">&gt;</span>arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'标准优化版冒泡排序运行时间'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> _arr2 <span class="token operator">=</span> <span class="token function">bubbleSort2</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'标准优化版冒泡排序运行时间'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>进化版1：单层for循环，一轮for循环结束，重置循环变量至起点，模拟双层循环，<strong>这版较快</strong>（当然不是绝对的快，数据量大时较其他冒泡快）。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bubbleSort3</span><span class="token punctuation">(</span><span class="token parameter">arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> length <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 单层for循环</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 在循环到最大值时候重置j(j=-1到上面j++重置为0)这样可以省了外层for循环</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">==</span> length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        	j <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        	length<span class="token operator">--</span><span class="token punctuation">;</span><span class="token comment">//每一轮完成后，目标冒泡到了length位，排好的不再比。</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'单层循环冒泡耗时'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> _arr3 <span class="token operator">=</span> <span class="token function">bubbleSort3</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'单层循环冒泡耗时'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_arr3<span class="token punctuation">)</span>
</code></pre></div><p>进化版2：<strong>最符合冒泡思路</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bubbleSort4</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> numElements <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">let</span> isDone <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> isSort <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">do</span><span class="token punctuation">{</span>
        isDone <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>numElements<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>isSort<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&gt;</span>arr<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">let</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
                isDone <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        isSort<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>isDone<span class="token punctuation">)</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'进化版冒泡排序运行时间'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> _arr4 <span class="token operator">=</span> <span class="token function">bubbleSort4</span><span class="token punctuation">(</span>arr4<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'进化版冒泡排序运行时间'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_arr4<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>数组长度2W比较耗时</p> <img src="/docs/images/冒泡排序耗时.png" alt="冒泡排序比较"> <h3 id="二-选择排序"><a href="#二-选择排序" class="header-anchor">#</a> 二.选择排序</h3> <p>选择排序从数组的开头开始，将第一个元素和其他元素进行比较。检查完所有元素后，最小的元素会被放到数组的第一个位置，然后算法会从第二个位置继续。这个过程一直进行，当进行到数组的倒数第二个位置时，所有的数据便完成了排序。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">selectSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> length <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">let</span> min<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        min <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token operator">&gt;</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                min <span class="token operator">=</span> j<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'选择排序运行时间'</span><span class="token punctuation">)</span>
<span class="token function">selectSort</span><span class="token punctuation">(</span>arr4<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'选择排序运行时间'</span><span class="token punctuation">)</span>
</code></pre></div><p>选择排序相比于冒泡排序:<strong>冒泡在不停地进行值的交换,选择排序只在每一圈内循环完成确定最小值位置后交换一次</strong></p> <h3 id="三-插入排序"><a href="#三-插入排序" class="header-anchor">#</a> 三.插入排序</h3> <p>插入排序有两个循环：外循环将数组元素挨个移动，内循环则对外循环中选中的元素及它后面的那个元素进行比较。如果外循环中选中的元素比内循环中选中的元素小，那么数组元素会向右移动，为内循环中的这个元素腾出位置。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">insertionSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> length <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">let</span> temp<span class="token punctuation">,</span>inner<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> outer<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>outer<span class="token operator">&lt;</span>length<span class="token punctuation">;</span>outer<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>outer<span class="token punctuation">]</span><span class="token punctuation">;</span>
        inner <span class="token operator">=</span> outer<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>inner<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>arr<span class="token punctuation">[</span>inner<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;=</span>temp<span class="token punctuation">)</span><span class="token punctuation">{</span>
            arr<span class="token punctuation">[</span>inner<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>inner<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            inner<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        arr<span class="token punctuation">[</span>inner<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'插入排序运行时间'</span><span class="token punctuation">)</span>
<span class="token function">insertionSort</span><span class="token punctuation">(</span>arr5<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'插入排序运行时间'</span><span class="token punctuation">)</span>
</code></pre></div><p>数组长度2W比较耗时</p> <img src="/docs/images/插入排序耗时.png" alt="插入排序"> <h3 id="四-归并排序"><a href="#四-归并排序" class="header-anchor">#</a> 四.归并排序</h3> <p>归并排序是一种分而治之算法。其思想是将原始数组切分成较小的数组，直到每个小数组只有一个位置，接着将小数组归并成较大的数组，直到最后只有一个排序完毕的大数组。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> length <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>length<span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> middle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>length<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>middle<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>middle<span class="token punctuation">,</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        arr <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span>right</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>left<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>j<span class="token operator">&lt;</span>right<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span>right<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span>left<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">:</span>right<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>left<span class="token punctuation">.</span>length<span class="token operator">?</span>left<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">:</span>right<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'归并排序运行时间'</span><span class="token punctuation">)</span>
<span class="token function">mergeSort</span><span class="token punctuation">(</span>arr6<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'归并排序运行时间'</span><span class="token punctuation">)</span>
</code></pre></div><p>2W长度</p> <img src="/docs/images/归并排序耗时.png" alt="归并排序耗时"> <h3 id="五-快速排序"><a href="#五-快速排序" class="header-anchor">#</a> 五.快速排序</h3> <p>普通快排</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">quickSort1</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> lesser <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> greater <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> pivot <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span>pivot<span class="token punctuation">)</span><span class="token punctuation">{</span>
            lesser<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            greater<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">quickSort1</span><span class="token punctuation">(</span>lesser<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>pivot<span class="token punctuation">,</span><span class="token function">quickSort1</span><span class="token punctuation">(</span>greater<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'快速排序运行时间'</span><span class="token punctuation">)</span>
<span class="token function">quickSort1</span><span class="token punctuation">(</span>arr7<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'快速排序运行时间'</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>升级版本:</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">quickSort2</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">quick</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>arr<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">quick</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> index<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        index <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token operator">&lt;</span>index<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">quick</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>left<span class="token punctuation">,</span>index<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>index<span class="token operator">&lt;</span>right<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">quick</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>index<span class="token punctuation">,</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> pivot <span class="token operator">=</span> arr<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right<span class="token operator">+</span>left<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> left<span class="token punctuation">;</span>
    <span class="token keyword">let</span> j <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>j<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span>pivot<span class="token punctuation">)</span><span class="token punctuation">{</span>
            i<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">&gt;</span>pivot<span class="token punctuation">)</span><span class="token punctuation">{</span>
            j<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>j<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>
            i<span class="token operator">++</span><span class="token punctuation">;</span>
            j<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'快速升级版排序运行时间'</span><span class="token punctuation">)</span>
<span class="token function">quickSort2</span><span class="token punctuation">(</span>arr8 <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'快速升级版排序运行时间'</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>2W长度</strong></p> <img src="/docs/images/快速排序耗时.png" alt="快排轻易别用"> <h2 id="_17-sort排序"><a href="#_17-sort排序" class="header-anchor">#</a> 17. sort排序</h2> <p><strong>有以下数组,根据条件实现排序</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'a12'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'b12'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k1'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'VirtualUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'g13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'g2'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k9'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'FaxUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">11</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'f13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'d3'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k6'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'DigitalUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">19</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'f12'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'c2'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k20'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'DigitalUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'f13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'c6'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'AO'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'f13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'c2'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k18'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'FaxUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'f13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'c1'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k22'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'Dept'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'k13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'c1'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'VirtualUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>1.指定根据某一个属性排序,例根据firstName排序</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sortExtensionsByName</span><span class="token punctuation">(</span><span class="token parameter">extensions<span class="token punctuation">,</span>type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    extensions<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">///let nameA = a[type].toUpperCase()</span>
        <span class="token comment">// let nameB = b[type].toUpperCase()                </span>
        <span class="token comment">// if (nameA &lt; nameB) {</span>
        <span class="token comment">//     return -1;</span>
        <span class="token comment">// }</span>
        <span class="token comment">// if (nameA &gt; nameB) {</span>
        <span class="token comment">//     return 1;</span>
        <span class="token comment">// }</span>
        <span class="token comment">// // names must be equal</span>
        <span class="token comment">// return 0;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> extensions<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> newArr1 <span class="token operator">=</span> <span class="token function">sortExtensionsByName</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token string">'firstName'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> newArr2 <span class="token operator">=</span> <span class="token function">sortExtensionsByName</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token string">'ext'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> newArr3 <span class="token operator">=</span> <span class="token function">sortExtensionsByName</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token string">'lastName'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> newArr1<span class="token punctuation">,</span>newArr2<span class="token punctuation">,</span>newArr3<span class="token punctuation">)</span>
</code></pre></div><p><strong>2.根据firstName + lastName + ext 进行排序,方法同上</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sortExtensions</span><span class="token punctuation">(</span><span class="token parameter">extensions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    extensions<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> nameA <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>firstName <span class="token operator">+</span> a<span class="token punctuation">.</span>lastName <span class="token operator">+</span> a<span class="token punctuation">.</span>ext <span class="token operator">+</span> <span class="token string">''</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> nameB <span class="token operator">=</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>firstName <span class="token operator">+</span> b<span class="token punctuation">.</span>lastName <span class="token operator">+</span> b<span class="token punctuation">.</span>ext <span class="token operator">+</span> <span class="token string">''</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nameA<span class="token punctuation">,</span>nameB<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//第一次nameA是数组中第[1]项,nameB是第[0]项</span>
        <span class="token keyword">return</span> nameA<span class="token operator">&gt;</span>nameB<span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>      <span class="token comment">//第一项大于第0项 1 不交换顺序    否则-1交换顺序</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> extensions<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> newArr4 <span class="token operator">=</span> <span class="token function">sortExtensions</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr4<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>3.根据extType进行排序,指定顺序</strong> <code>'DigitalUser'&lt;'VirtualUser'&lt;'FaxUser'&lt;'AO'&lt;'Dept'</code>，<code>exType</code>只有这几个固定值</p> <p>方法1.</p> <p>指定规则数组,for循环，根据规则数组的书序及项，依次使用filter，concat连接得到结果</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> ruleArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Dept'</span><span class="token punctuation">,</span><span class="token string">'AO'</span><span class="token punctuation">,</span><span class="token string">'FaxUser'</span><span class="token punctuation">,</span><span class="token string">'VirtualUser'</span><span class="token punctuation">,</span><span class="token string">'DigitalUser'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> resultArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">sortExtensionsExtType</span><span class="token punctuation">(</span><span class="token parameter">extensions</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>ruleArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		resultArr <span class="token operator">=</span> resultArr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span>item<span class="token punctuation">.</span>extType<span class="token operator">===</span>ruleArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> resultArr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>不用for循环,用reduce实现<strong>简化</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> result <span class="token operator">=</span> ruleArr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>pre<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span>itemm<span class="token punctuation">.</span>extType<span class="token operator">===</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>方法2 用sort( )实现,<strong>根据规则数组项的索引进行判断排序</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'a12'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'b12'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k1'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'VirtualUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'g13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'g2'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k9'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'FaxUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">11</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'f13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'d3'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k6'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'DigitalUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">19</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'f12'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'c2'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k20'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'DigitalUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'f13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'c6'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'AO'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'f13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'c2'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k18'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'FaxUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'f13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'c1'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k22'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'Dept'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token operator">:</span> <span class="token string">'k13'</span><span class="token punctuation">,</span> lastName<span class="token operator">:</span> <span class="token string">'c1'</span><span class="token punctuation">,</span> ext<span class="token operator">:</span> <span class="token string">'k'</span><span class="token punctuation">,</span> extType<span class="token operator">:</span> <span class="token string">'VirtualUser'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>比对数据</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> ruleArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Dept'</span><span class="token punctuation">,</span><span class="token string">'AO'</span><span class="token punctuation">,</span><span class="token string">'FaxUser'</span><span class="token punctuation">,</span><span class="token string">'VirtualUser'</span><span class="token punctuation">,</span><span class="token string">'DigitalUser'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> ruleArr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>extType<span class="token punctuation">)</span><span class="token operator">-</span>ruleArr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>extType<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_18-settimeout模拟setinterval"><a href="#_18-settimeout模拟setinterval" class="header-anchor">#</a> 18. setTimeout模拟setInterval</h2> <p>为什么要用setTimeout模拟setInterval ？</p> <h3 id="_18-1-简介"><a href="#_18-1-简介" class="header-anchor">#</a> 18.1 简介</h3> <p>setTimeout 延迟一段时间执行一次 (Only one)；用clearTimeout()终止</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>··· <span class="token punctuation">}</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// n毫秒后执行function</span>
</code></pre></div><p>setInterval 每隔一段时间执行一次 (Many times)；用clearInterval()终止</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>··· <span class="token punctuation">}</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每隔n毫秒执行一次function</span>
</code></pre></div><p><strong>注：setTimeout和setInterval的回调函数，都是经过n毫秒后被添加到队列中，而不是过n毫秒后立即执行。</strong></p> <blockquote><p>W3C在HTML标准中规定，规定要求setTimeout中低于4ms的时间间隔算为4ms。 (不过也有一说是不同浏览器有不同的最小时间设定)。</p></blockquote> <h3 id="_18-2-知识储备"><a href="#_18-2-知识储备" class="header-anchor">#</a> 18.2 知识储备</h3> <p>1、浏览器是个多进程应用。</p> <p>首先你要知道 浏览器是个多进程应用，那这些进程里都包含哪些：</p> <ul><li>Browser进程：浏览器的主进程（负责协调、主控），只有一个，作用：
<ul><li>负责浏览器界面显示，与用户交互。如前进，后退等</li> <li>负责各个页面的管理，创建和销毁其他进程</li> <li>将Renderer进程得到的内存中的Bitmap，绘制到用户界面上</li> <li>网络资源的管理，下载等</li></ul></li> <li>第三方插件进程：每种类型的插件对应一个进程，仅当使用该插件时才创建</li> <li>GPU进程：最多一个，用于3D绘制等</li> <li>浏览器内核（浏览器渲染进程，它内部是多线程的）：默认每个Tab页面一个进程，互不影响。</li></ul> <p>2、浏览器内核中的多线程。</p> <ul><li>GUI渲染线程</li> <li>JS引擎线程：负责解析Javascript脚本，运行代码。</li> <li>事件触发线程：归属于浏览器而不是JS引擎，用来控制事件循环（可以理解，JS引擎自己都忙不过来，需要浏览器另开线程协助），当JS引擎执行代码块如setTimeOut时（也可来自浏览器内核的其他线程,如鼠标点击、AJAX异步请求等），会将对应任务添加到事件线程中。由于JS的单线程关系，所以这些待处理队列中的事件都得排队等待JS引擎处理（当JS引擎空闲时才会去执行）。</li> <li>定时触发器线程：因为JavaScript引擎是单线程的, 如果处于阻塞线程状态就会影响记计时的准确。计时完毕后，添加到事件队列中，等待JS引擎空闲后执行。</li> <li>异步http请求线程。</li></ul> <h3 id="_18-3-setinterval缺点-与-settimeout"><a href="#_18-3-setinterval缺点-与-settimeout" class="header-anchor">#</a> 18.3 setInterval缺点 与 setTimeout</h3> <blockquote><p>再次强调，定时器指定的时间间隔，表示的是何时将定时器的代码添加到消息队列，而不是何时执行代码。所以真正何时执行代码的时间是不能保证的，取决于何时被主线程的事件循环取到，并执行。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">,</span> <span class="token constant">N</span><span class="token punctuation">)</span>  
<span class="token comment">//即：每隔N秒把function事件推到消息队列中</span>
</code></pre></div><img src="/docs/images/setinterval.png" alt="定时器"> <p>上图可见，setInterval每隔100ms往队列中添加一个事件；100ms后，添加T1定时器代码至队列中，主线程中还有任务在执行，所以等待，some event执行结束后执行T1定时器代码；又过了100ms，T2定时器被添加到队列中，主线程还在执行T1代码，所以等待；又过了100ms，理论上又要往队列里推一个定时器代码，<strong>但由于此时T2还在队列中，所以T3不会被添加，结果就是此时被跳过</strong>；这里我们可以看到，<strong>T1定时器执行结束后马上执行了T2代码</strong>，所以并没有达到定时器的效果。</p> <p>综上所述，setInterval有两个缺点：</p> <ul><li>使用setInterval时，某些间隔会被跳过；</li> <li>可能多个定时器会连续执行；</li></ul> <p>可以这么理解：<strong>每个setTimeout产生的任务会直接push到任务队列中；而setInterval在每次把任务push到任务队列前，都要进行一下判断(看上次的任务是否仍在队列中)。</strong></p> <p>因而我们一般用setTimeout模拟setInterval，来规避掉上面的缺点。</p> <p>下面说个经典的例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码输出结果是：5个5，那么问题来了：是每隔1秒输出一个5 ？还是一秒后立即输出5个5？</p> <p>答案是：一秒后立即输出5个5</p> <p>setTimeout执行时：定时触发器线程、事件触发线程、JS引擎线程在干什么？</p> <p>每个setTimeout都由定时触发器线程负责计时，计时完毕后，添加到事件队列中(即：事件触发线程)，等待JS引擎线程空闲后，再来依次执行。</p> <p>为什么一秒后立即输出5个5？</p> <p>首先JS引擎线程 要运行for循环，在每次循环中都会调用一个setTimeout函数，每个setTimeout计时结束后都会将其回调函数添加到 事件队列 中。等for循环结束后（即JS引擎线程空闲后），才开始按顺序执行事件队列中的函数。
每次循环都会在一秒后将回调函数添加到事件队列中，但由于两次相邻的循环时间是短到可以忽略不计的，所以表面看上去 一秒后立即执行了5次回调函数，即一秒后立即输出5个5。</p> <p>当然为什么输出不是1到5，这个涉及到作用域的问题了，这里就不解释了。</p> <h3 id="_18-4-settimeout模拟setinterval"><a href="#_18-4-settimeout模拟setinterval" class="header-anchor">#</a> 18.4 setTimeout模拟setInterval</h3> <p>setTimeout模拟setInterval，也可理解为链式的setTimeout。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//每隔1秒让++i</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//执行time函数</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    time <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//重写time函数，从而起到关闭定时器的效果</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上述函数每次执行的时候都会创建一个新的定时器，第二个setTimeout使用了arguments.callee()获取当前函数的引用，并且为其设置另一个定时器。好处：</p> <ul><li>在前一个定时器执行完前，不会向队列插入新的定时器（解决缺点一）</li> <li>保证定时器间隔（解决缺点二）</li></ul> <h2 id="_19-设计模式"><a href="#_19-设计模式" class="header-anchor">#</a> 19. 设计模式</h2> <h3 id="_1-什么是设计模式"><a href="#_1-什么是设计模式" class="header-anchor">#</a> 1.什么是设计模式?</h3> <p>设计模式的定义:</p> <p>​	<strong>在面对对象软件设计过程中针对特定问题的简洁而优雅的解决方案</strong>，通俗一点说就是在某种特定场合下对某个问题的一种解决方案。</p> <p>​	在软件设计中，模式是一些经过了大量实际项目验证的优秀解决方案。熟悉这些模式的程序员，对某些模式的理解也许形成了条件反射。当适合的场景出现时，它们可以很快地找到某种模式作为解决方案。</p> <p><strong>原则：找出程序中变化的地方，并将变化封装起来。</strong></p> <h3 id="_2-基本概念"><a href="#_2-基本概念" class="header-anchor">#</a> 2.基本概念</h3> <h4 id="_2-1多态"><a href="#_2-1多态" class="header-anchor">#</a> 2.1多态</h4> <p>​	多态的实际含义是：同一操作作用于不同的对象上面，可以产生不同的解释和不同的执行结果。换句话说，给不同的对象发送同一消息的时候，这些对象会根据这个消息分别给出不同的反馈。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">makeSound</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">animal</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> animal <span class="token keyword">instanceof</span> <span class="token class-name">Duck</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'嘎嘎嘎'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> animal <span class="token keyword">instanceof</span> <span class="token class-name">Chicken</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'咯咯咯'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">Duck</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">Chicken</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">makeSound</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">Duck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">makeSound</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">Chicken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><p>当我们分别向鸭和鸡发出“叫唤”的消息时，它们根据此消息作出了各自不同的反应。但这样的“多态性”是无法令人满意的，如果后来又增加了一只动物，比如狗，显然狗的叫声是“汪汪汪”，此时我们必须得改动makeSound 函数，才能让狗也发出叫声。修改代码总是危险的，修改的地方越多，程序出错的可能性就越大，而且当动物的种类越来越多时，makeSound 有可能变成一个巨大的函数。</p> <p>多态背后的思想是将“<strong>做什么</strong>”和“<strong>谁去做以及怎样去做</strong>”<strong>分离开来</strong>，<strong>也就是将“不变的事物”与 “可能改变的事物”分离开来</strong>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">makeSound</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">animal</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
	animal<span class="token punctuation">.</span><span class="token function">sound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">Duck</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Duck</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sound</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'嘎嘎嘎'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">Chicken</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Chicken</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sound</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'咯咯咯'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">makeSound</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">Duck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 嘎嘎嘎</span>
<span class="token function">makeSound</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">Chicken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 咯咯咯</span>
<span class="token keyword">var</span> <span class="token function-variable function">Dog</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sound</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'汪汪汪'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">makeSound</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 汪汪汪</span>
<span class="token comment">// 这种情况下, makeSound和每个不同会叫的生物之间的关系就被完全分割</span>
</code></pre></div><h4 id="_2-2封装"><a href="#_2-2封装" class="header-anchor">#</a> 2.2封装</h4> <p>封装的目的是将信息隐藏。一般而言，我们讨论的封装是封装数据和封装实现。</p> <p>​	封装数据</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> myObject <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> __name <span class="token operator">=</span> <span class="token string">'sven'</span><span class="token punctuation">;</span> <span class="token comment">// 私有（private）变量</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 公开（public）方法</span>
            <span class="token keyword">return</span> __name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> myObject<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：sven</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> myObject<span class="token punctuation">.</span>__name <span class="token punctuation">)</span> <span class="token comment">// 输出：undefined</span>
</code></pre></div><p>​	封装实现, 实现查找一个数组中的复合条件的对象的实现方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">find</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">findData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> loaclKeys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> elem<span class="token punctuation">]</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        loaclKeys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> argKeys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>findData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> finalMatchData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    argKeys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">searchKey</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>loaclKeys<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>searchKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token string">&quot;没有符合条件的数据&quot;</span><span class="token punctuation">;</span> <span class="token comment">//简易判断</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> matchState <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> argKeys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            matchState<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span>argKeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">===</span> findData<span class="token punctuation">[</span>argKeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">!</span>matchState<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-单例模式"><a href="#_3-单例模式" class="header-anchor">#</a> 3. 单例模式</h3> <p>单例模式的特点：<strong>保证一个类仅有一个实例</strong>，<strong>并提供一个访问它的全局访问点</strong>。</p> <h4 id="_1-单例模式的简单实现"><a href="#_1-单例模式的简单实现" class="header-anchor">#</a> 1. 单例模式的简单实现</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">Singleton</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Singleton</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Singleton<span class="token punctuation">.</span><span class="token function-variable function">getInstance</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//提供一个访问Singleton类的实例的接口</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 检测是否已经存在这个实例</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//不存在则生成</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">;</span> <span class="token comment">// 已经存在则直接返回, 确保多次调用只会返回一次实例</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span> <span class="token string">'sven1'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span> <span class="token string">'sven2'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span> <span class="token punctuation">(</span> a <span class="token operator">===</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h4 id="_2-透明的单例模式"><a href="#_2-透明的单例模式" class="header-anchor">#</a> 2. 透明的单例模式</h4> <p>​	“透明”的单例类: 用户从这个类中创建对象的时候，可以像使用其他任何普通类一样。 ( 这个所说的透明是指从外观上,看不出普通的类和透明的类之间的区别是啥 )</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> CreateUniqDiv <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> instance<span class="token punctuation">;</span>
    <span class="token keyword">class</span> <span class="token class-name">createDiv</span><span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//是否已经创造一个实例, 如果已经创造过,则直接返回之前创造的</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>html<span class="token operator">=</span>html<span class="token punctuation">;</span>
            instance<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token comment">//当第一次运行该函数后, 把生成的示例存储在闭包的数据之中</span>
        <span class="token punctuation">}</span>
        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> createDiv<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateUniqDiv</span><span class="token punctuation">(</span><span class="token string">'sven1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 改类的全局访问点, 就是这个函数本身</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateUniqDiv</span><span class="token punctuation">(</span><span class="token string">'sven2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h4 id="_3-用代理实现单例模式"><a href="#_3-用代理实现单例模式" class="header-anchor">#</a> 3. 用代理实现单例模式</h4> <p>​	通过引入代理类的方式，我们同样完成了一个单例模式的编写，跟之前不同的是，现在我们把负责管理单例的逻辑移到了代理类proxySingletonCreateDiv 中。这样一来，CreateDiv 就变成了一个普通的类，它跟proxySingletonCreateDiv 组合起来可以达到单例模式的效果。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">CreateDiv</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>html<span class="token operator">=</span>html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> ProxySingletonCreateDiv <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> instance<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">html</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>instance <span class="token punctuation">)</span><span class="token punctuation">{</span>
	   <span class="token comment">//是否已经创造一个实例, 如果已经创造过,则直接返回之前创造的</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateDiv</span><span class="token punctuation">(</span> html <span class="token punctuation">)</span><span class="token punctuation">;</span>
	   <span class="token comment">//当第一次运行该函数后, 把生成的示例存储在闭包的数据之中</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxySingletonCreateDiv</span><span class="token punctuation">(</span><span class="token string">'sven1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 改类的全局访问点, 就是这个函数本身</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxySingletonCreateDiv</span><span class="token punctuation">(</span><span class="token string">'sven2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h4 id="_4-惰性单例"><a href="#_4-惰性单例" class="header-anchor">#</a> 4. 惰性单例</h4> <p>​	<strong>惰性单例指的是在需要的时候才创建对象实例。惰性单例是单例模式的重点，这种技术在实际开发中非常有用。</strong></p> <p>​	前几个的案例从某种意义上来说也算是惰性的一种,但是还是有一些问题。</p> <p>​	这段代码仍然是违反单一职责原则的，创建对象和管理单例的逻辑都放在createDiv对象内部。如果我们下次需要创建页面中唯一的iframe，或者script 标签，用来跨域请求数据，就必须得如法炮制，把createDiv函数几乎照抄一遍,然后在里面改一个元素的名称什么的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> CreateUniqDiv <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> instance<span class="token punctuation">;</span>
    <span class="token keyword">class</span> <span class="token class-name">createDiv</span><span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//是否已经创造一个实例, 如果已经创造过,则直接返回之前创造的</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>html<span class="token operator">=</span>html<span class="token punctuation">;</span>
            instance<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token comment">//当第一次运行该函数后, 把生成的示例存储在闭包的数据之中</span>
        <span class="token punctuation">}</span>
        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> createDiv<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateUniqDiv</span><span class="token punctuation">(</span><span class="token string">'sven1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 改类的全局访问点, 就是这个函数本身</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateUniqDiv</span><span class="token punctuation">(</span><span class="token string">'sven2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>​	<strong>我们把创建实例对象的职责和管理单例的职责分别放置在两个方法里，这两个方法可以独立变化而互不影响，当它们连接在一起的时候，就完成了创建唯一实例对象的功能。</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//要做到单例的复用性, </span>
<span class="token comment">//那么我们先把之前实现单例的那些代码中的变与不变的部分拆分开</span>
<span class="token comment">//@param :管理单例</span>
<span class="token comment">//@fn: 执行的业务函数</span>
<span class="token keyword">function</span> <span class="token function">getSingle</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result<span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span>  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> result<span class="token operator">||</span> <span class="token punctuation">(</span>result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//实验性的业务函数</span>
<span class="token keyword">let</span> createSingleIframe <span class="token operator">=</span> <span class="token function">getSingle</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span> <span class="token punctuation">(</span> <span class="token string">'iframe'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> iframe <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> iframe<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span> <span class="token string">'loginBtn'</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> loginLayer <span class="token operator">=</span> <span class="token function">createSingleIframe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    loginLayer<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://baidu.com'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_5-单例模式的应用"><a href="#_5-单例模式的应用" class="header-anchor">#</a> 5. 单例模式的应用</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//只绑定单次业务</span>
<span class="token keyword">var</span> bindEvent <span class="token operator">=</span> <span class="token function">getSingle</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span> <span class="token string">'div1'</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span> <span class="token punctuation">(</span> <span class="token string">'click'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'开始渲染列表'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-工厂模式"><a href="#_4-工厂模式" class="header-anchor">#</a> 4. 工厂模式</h3> <p>​	工厂模式就是使<strong>同一类别</strong>的<strong>类</strong>综合起来，以使接口统一方便调用，同时在修改以及扩展时更加方便。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Shop</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">Steak</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>price<span class="token punctuation">,</span>time</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 	<span class="token comment">//内部很是自由, 可以随意使用各种方式</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> time<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">Grill</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//烧烤</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">Noodles</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//面条</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//统一方法调用</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Shop</span><span class="token punctuation">(</span><span class="token string">&quot;Steak&quot;</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//老板来份牛排</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Shop</span><span class="token punctuation">(</span><span class="token string">&quot;Grill&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//老板来份烧烤</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Shop</span><span class="token punctuation">(</span><span class="token string">&quot;Noodles&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//老板来份面条</span>
</code></pre></div><h3 id="_5-建造者模式"><a href="#_5-建造者模式" class="header-anchor">#</a> 5. 建造者模式</h3> <p>​	**建造者模式（Builder）：将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。**过程部分可以独立的进行维护和修改，而不受构建部分的约束</p> <p>​	看名称我们首先想到的就是造房子。建造者模式就像是施工团队，包工头和客户沟通了解了客户的建房需求后，在自己团队内部分发任务，将复杂的建房过程分解成若干小组，各小组分工合作最终得到需求的房子。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//建造房子场景</span>
<span class="token comment">//建造者 - 施工团队</span>
<span class="token keyword">let</span> <span class="token function-variable function">Builder</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//成员01 -- 决定厅室</span>
    <span class="token keyword">function</span> <span class="token function">Rooms</span><span class="token punctuation">(</span><span class="token parameter">member</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> member <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;入住人数错误！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rooms <span class="token operator">=</span> member<span class="token operator">&gt;=</span><span class="token number">4</span><span class="token operator">?</span><span class="token number">4</span><span class="token operator">:</span>member<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//成员02 -- 决定面积</span>
    <span class="token keyword">function</span> <span class="token function">FloorSpace</span><span class="token punctuation">(</span><span class="token parameter">budget</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> budget <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>budget<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>budget <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;预算过低或错误！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>budget <span class="token operator">=</span> budget<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//成员03 -- 整体风格</span>
    <span class="token keyword">function</span> <span class="token function">Style</span><span class="token punctuation">(</span><span class="token parameter">style</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>style <span class="token operator">=</span> style <span class="token operator">||</span> <span class="token string">&quot;常规风格&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
        <span class="token comment">//住几人，预算多少(万)，风格</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">member<span class="token punctuation">,</span> budget<span class="token punctuation">,</span> style</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Rooms</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>member<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">FloorSpace</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>budget<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">Style</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//包工头获取客户需求，然后建造房子</span>
<span class="token keyword">let</span> house1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">&quot;小清新&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//客户1的需求</span>
<span class="token keyword">let</span> house2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">&quot;欧美&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//客户2的需求</span>
</code></pre></div><p>建造者模式的<strong>定义--将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示</strong>。通过上面的例子我们对该解释也就有了一定的理解。其实类似于ajax的实现，发送请求返回数据与成功的处理函数这种也是分离状态，我们调用封装好的ajax传入不同的各类参数也可以看成建造者模式。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> Builder <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//表示部分</span>
    <span class="token comment">//表示部分可以独立的进行维护和修改，而不受构建部分的约束</span>
    <span class="token keyword">function</span> <span class="token function">Rooms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">Space</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">Style</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">//构建部分</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>总结：<strong>当我们构造的对象，内部结构较复杂时，使用建造者模式将内部各模块分开创建就非常合适。</strong></p> <h3 id="_6-原型模式"><a href="#_6-原型模式" class="header-anchor">#</a> 6. 原型模式</h3> <p>原型模式（Prototype）：用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。因为JavaScript的特性，这一点实现起来格外的简单。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//父类</span>
<span class="token keyword">class</span> <span class="token class-name">Parent</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">showX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//子类1 继承</span>
<span class="token keyword">class</span> <span class="token class-name">Child1</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">showY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//子类2 继承</span>
<span class="token keyword">class</span> <span class="token class-name">Child2</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>z</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用super传参</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">=</span> z<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">showZ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>多个类使用到了相同的属性或方法，那我们就可以通过原型继承的方式来创造出类或者实例对象。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;Hello&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> objA <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">{</span>
    name <span class="token operator">:</span><span class="token punctuation">{</span>
        writable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        configurable <span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        enumerable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        value <span class="token operator">:</span> <span class="token string">&quot;AA&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> objB <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">{</span>
    name <span class="token operator">:</span><span class="token punctuation">{</span>
        writable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        configurable <span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        enumerable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        value <span class="token operator">:</span> <span class="token string">&quot;BB&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
objA<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-策略模式"><a href="#_7-策略模式" class="header-anchor">#</a> 7. 策略模式</h3> <h2 id="_20-分时函数"><a href="#_20-分时函数" class="header-anchor">#</a> 20. 分时函数</h2> <p><strong>当我们对大量数据进行处理的时候, 比如将一个数组里面的大量数据渲染出dom节点, 如果直接for循环实现</strong></p> <p><strong>会在短时间内给浏览器的渲染引擎造成很大的压力,很有可能会造成假死, 卡顿等情况</strong></p> <p><strong>所以我们开发这个分时函数, 目的就是为了使得大量的数据可以分时分段渲染, 这样, 性能就会更好一些</strong></p> <p>@param: 分时函数</p> <p>@array: 需要处理的数据</p> <p>@fn   : 处理数据的函数</p> <p>@step : 单次处理数据个数的步长</p> <p>@interval : 每隔多长时间处理一次数据</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">timeChunk</span><span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> step <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> interval <span class="token operator">=</span> <span class="token number">200</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer<span class="token punctuation">;</span><span class="token comment">// 预存一个定时器</span>
    <span class="token keyword">function</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 每次激活只会处理step长度(如果数据剩余的数据少于step则以数组的剩余数据为准)的数据</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>step<span class="token punctuation">,</span> array<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;业务函数被激活一次&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">fn</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            array<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>业务模拟函数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> ary <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ary<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> renderFriendList <span class="token operator">=</span> <span class="token function">timeChunk</span><span class="token punctuation">(</span>ary<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> n<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">renderFriendList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_21-完整节流"><a href="#_21-完整节流" class="header-anchor">#</a> 21. 完整节流</h2> <p>@param: 节流函数</p> <p>@fn: 需要执行的业务函数</p> <p>@interval: 每次函数执行时的间隔时间</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span>interval</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> _self<span class="token operator">=</span> fn<span class="token punctuation">;</span><span class="token comment">// 保存待执行的业务函数, 方便在函数内部引用</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">// 预留一个变量用作存储定时器</span>
    <span class="token keyword">let</span> isFirst <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">// 判断是否是第一次执行业务函数</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 返回待执行的加工后的业务函数</span>
        <span class="token keyword">let</span> _args <span class="token operator">=</span> arguments<span class="token punctuation">;</span> <span class="token comment">// 存储加工后的业务函数的实参</span>
        <span class="token keyword">let</span> _me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">//调用该函数的对象</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;_me&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isFirst<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">_self</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>_me<span class="token punctuation">,</span>_args<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当第一执行业务函数时, 立即执行,避免因延迟导致的</span>
            <span class="token keyword">return</span> isFirst <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 修改flag, 并退出函数</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//如果timer存在, 则直接退出</span>
            <span class="token keyword">return</span>  <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;延时器被激活&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在500ms后清除掉这个定时器</span>
            timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 同时把值还原成null</span>
            <span class="token function">_self</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>_me<span class="token punctuation">,</span>_args<span class="token punctuation">)</span> <span class="token comment">// 调用一次业务函数, 下一次逻辑就是再重新生成一个定时器</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>interval<span class="token operator">||</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onresize<span class="token operator">=</span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;浏览器的尺寸发生变化了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_22-js字符串与二进制相互转换"><a href="#_22-js字符串与二进制相互转换" class="header-anchor">#</a> 22. js字符串与二进制相互转换</h2> <ul><li>字符串转ascii码，用charCodeAt();</li> <li>ascii码转字符串，用fromCharCode();</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> code <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> str2 <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>数字，ascii码转二进制。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//105</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1101001</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;我&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//25105</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//110001000010001</span>
</code></pre></div><p><strong>将字符串转换成二进制形式，中间用空格隔开</strong>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">strToBinary</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> list <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>list<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> item <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> binaryStr <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>binartStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>   
    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">strToBinary</span><span class="token punctuation">(</span><span class="token string">&quot;我们&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//110001000010001 100111011101100</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">strToBinary</span><span class="token punctuation">(</span><span class="token string">&quot;@%$+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1000000 100101 100100 101011</span>
</code></pre></div><p><strong>将二进制字符串转换成Unicode字符串</strong>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">binaryToStr</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> list <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>list<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">var</span> item <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> asciiCode <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> charValue <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>asciiCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
         result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>charValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">binaryToStr</span><span class="token punctuation">(</span><span class="token string">&quot;110001000010001 100111011101100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//我们</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">binaryToStr</span><span class="token punctuation">(</span><span class="token string">&quot;1000000 100101 100100 101011&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//@%$+ </span>
</code></pre></div><h2 id="_23-jsconfig-ison文件介绍"><a href="#_23-jsconfig-ison文件介绍" class="header-anchor">#</a> 23. jsconfig.ison文件介绍</h2> <p>项目中引用图片路径使用相对路径不方便。<code>jsconfig.json可以帮助我们配置绝对路径自动导入</code></p> <p>在项目根目录下创建<code>jsconfig.json</code>文件，他是webstorm的一个配置文件，基于<code>typeScript</code>中的<code>tsconfig.json</code>文件演化而来。把他放到项目根目录下，vscode会把整个项目的文件夹当做一个完整的js工程，我们对工程进行配置可以让vscode提供更好的代码补全和提示功能。</p> <p>配置绝对路径导入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;src&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;**/node_modules/*&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre></div><p>这样就能在项目中使用绝对路径导入模块及静态资源。</p> <h2 id="_24-hygen模板模板生成器配置"><a href="#_24-hygen模板模板生成器配置" class="header-anchor">#</a> 24. hygen模板模板生成器配置</h2> <p>安装依赖，安装到全局</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code>npm i <span class="token operator">-</span>g hygen
</code></pre></div><p>初始化<code>hygen</code>，会在项目根目录下创建一个<code>_templates</code>文件夹</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code>hygen init self
</code></pre></div><p>创建<code>component</code></p> <div class="language-nginx extra-class"><pre class="language-nginx"><code>hygen new <span class="token class-name">generator</span> component
</code></pre></div><p>删除<code>_templates/component/new/</code>下的文件，这里的文件就是配置的模板文件。</p> <ul><li>写法：<code>to</code>是输出文件的地址。我们以UI组件库为例</li></ul> <p>新建三个模板文件</p> <p><code>index.ejs.t</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">--</span><span class="token operator">-</span>
to<span class="token operator">:</span> src<span class="token operator">/</span>components<span class="token operator">/</span><span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token operator">/</span>index<span class="token punctuation">.</span>js
<span class="token operator">--</span><span class="token operator">-</span>

<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Styled<span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> <span class="token string">'./style'</span>

<span class="token keyword">function</span> <span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>children<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Styled<span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span><span class="token operator">&gt;</span>
           <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Styled<span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    children<span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>any
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p><code>stories.ejs.t</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">--</span><span class="token operator">-</span>
to<span class="token operator">:</span> src<span class="token operator">/</span>components<span class="token operator">/</span><span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token operator">/</span><span class="token operator">&lt;</span><span class="token operator">%=</span> h<span class="token punctuation">.</span>changeCase<span class="token punctuation">.</span><span class="token function">lcFirst</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token punctuation">.</span>stories<span class="token punctuation">.</span>js
<span class="token operator">--</span><span class="token operator">-</span>

<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;&lt;%= name %&gt;&quot;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Default</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;&gt;</span>默认<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>style.ejs.t</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">--</span><span class="token operator">-</span>
to<span class="token operator">:</span> src<span class="token operator">/</span>components<span class="token operator">/</span><span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token operator">/</span>style<span class="token punctuation">.</span>js
<span class="token operator">--</span><span class="token operator">-</span>

<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">'styled-components'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Styled<span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span> <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Styled<span class="token operator">&lt;</span><span class="token operator">%=</span> name <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>指令，使用指令就能根据模板、组件名快捷创建Icon组件</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code>hygen new <span class="token class-name">component</span> Icon
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020-6-23 15:55:21</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/docs/blog/V8及javaScript进阶.html">
        V8引擎，javaScript
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.496b0931.js" defer></script><script src="/docs/assets/js/2.f90869d3.js" defer></script><script src="/docs/assets/js/24.a9d72343.js" defer></script>
  </body>
</html>
