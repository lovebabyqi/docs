<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>H5 | 十月</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/docs/images/7.png">
    <meta name="description" content="vuepress博客">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="full-screen" content="true">
    <meta name="x5-fullscreen" content="true">
    <meta name="360-fullscreen" content="true">
    <link rel="preload" href="/docs/assets/css/0.styles.1ad37322.css" as="style"><link rel="preload" href="/docs/assets/js/app.ca99be60.js" as="script"><link rel="preload" href="/docs/assets/js/2.f90869d3.js" as="script"><link rel="preload" href="/docs/assets/js/27.cc2178c9.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.4e260648.js"><link rel="prefetch" href="/docs/assets/js/11.c7faf0dc.js"><link rel="prefetch" href="/docs/assets/js/12.4d2c3fa3.js"><link rel="prefetch" href="/docs/assets/js/13.0bca2749.js"><link rel="prefetch" href="/docs/assets/js/14.dd92793f.js"><link rel="prefetch" href="/docs/assets/js/15.eeac8df6.js"><link rel="prefetch" href="/docs/assets/js/16.77c2d47d.js"><link rel="prefetch" href="/docs/assets/js/17.6c52002a.js"><link rel="prefetch" href="/docs/assets/js/18.c007769d.js"><link rel="prefetch" href="/docs/assets/js/19.5b702adb.js"><link rel="prefetch" href="/docs/assets/js/20.8b01c1c8.js"><link rel="prefetch" href="/docs/assets/js/21.f30b63cd.js"><link rel="prefetch" href="/docs/assets/js/22.9270e206.js"><link rel="prefetch" href="/docs/assets/js/23.ea1e1991.js"><link rel="prefetch" href="/docs/assets/js/24.5f38cba3.js"><link rel="prefetch" href="/docs/assets/js/25.6c2aa877.js"><link rel="prefetch" href="/docs/assets/js/26.7f92cc24.js"><link rel="prefetch" href="/docs/assets/js/28.0ee493cf.js"><link rel="prefetch" href="/docs/assets/js/29.338f737e.js"><link rel="prefetch" href="/docs/assets/js/3.edb5e83a.js"><link rel="prefetch" href="/docs/assets/js/30.4fb62da0.js"><link rel="prefetch" href="/docs/assets/js/31.a6505a92.js"><link rel="prefetch" href="/docs/assets/js/32.98248ad6.js"><link rel="prefetch" href="/docs/assets/js/33.7257a28d.js"><link rel="prefetch" href="/docs/assets/js/34.64629f75.js"><link rel="prefetch" href="/docs/assets/js/35.e7242380.js"><link rel="prefetch" href="/docs/assets/js/36.3bc1c98b.js"><link rel="prefetch" href="/docs/assets/js/37.912b0fe3.js"><link rel="prefetch" href="/docs/assets/js/38.c532bc23.js"><link rel="prefetch" href="/docs/assets/js/4.af1ff500.js"><link rel="prefetch" href="/docs/assets/js/5.dc2b2112.js"><link rel="prefetch" href="/docs/assets/js/6.0e82c544.js"><link rel="prefetch" href="/docs/assets/js/7.30be3a2a.js"><link rel="prefetch" href="/docs/assets/js/8.d653075e.js"><link rel="prefetch" href="/docs/assets/js/9.4e806e1c.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.1ad37322.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/images/7.png" alt="十月" class="logo"> <span class="site-name can-hide">十月</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/blog/" class="nav-link">
  技术博客
</a></div><div class="nav-item"><a href="/docs/JavaScript/" class="nav-link">
  Js
</a></div><div class="nav-item"><a href="/docs/css/" class="nav-link router-link-active">
  html+css
</a></div><div class="nav-item"><a href="/docs/Vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/docs/React/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/docs/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/docs/wx/" class="nav-link">
  wx
</a></div><div class="nav-item"><a href="/docs/http/" class="nav-link">
  网络
</a></div><div class="nav-item"><a href="/docs/myComponents/" class="nav-link">
  封装组件
</a></div><div class="nav-item"><a href="/docs/utils/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="https://github.com/lovebabyqi/Components" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/blog/" class="nav-link">
  技术博客
</a></div><div class="nav-item"><a href="/docs/JavaScript/" class="nav-link">
  Js
</a></div><div class="nav-item"><a href="/docs/css/" class="nav-link router-link-active">
  html+css
</a></div><div class="nav-item"><a href="/docs/Vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/docs/React/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/docs/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/docs/wx/" class="nav-link">
  wx
</a></div><div class="nav-item"><a href="/docs/http/" class="nav-link">
  网络
</a></div><div class="nav-item"><a href="/docs/myComponents/" class="nav-link">
  封装组件
</a></div><div class="nav-item"><a href="/docs/utils/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="https://github.com/lovebabyqi/Components" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/css/css选择器.html" class="sidebar-link">CSS选择器</a></li><li><a href="/docs/css/html.html" class="sidebar-link">html拨云见日</a></li><li><a href="/docs/css/H5.html" class="active sidebar-link">H5</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_1-dataset" class="sidebar-link">1. dataset</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_2-classlist" class="sidebar-link">2. classList</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_3-scrollintoview-方法" class="sidebar-link">3. scrollIntoView()方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/css/H5.html#其他滚动方法" class="sidebar-link">其他滚动方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_4-数据持久化存储" class="sidebar-link">4. 数据持久化存储</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/css/H5.html#localstorage方法" class="sidebar-link">localStorage方法</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#sessionstorage方法" class="sidebar-link">sessionStorage方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_5-新增标签" class="sidebar-link">5. 新增标签</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_5-1-canvas" class="sidebar-link">5.1 canvas</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_5-2-新多媒体元素" class="sidebar-link">5.2 新多媒体元素</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_5-3-datalist" class="sidebar-link">5.3 datalist</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_5-4-progress" class="sidebar-link">5.4 progress</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_5-5-新增标签-块级元素-标签语义化" class="sidebar-link">5.5 新增标签,(块级元素)标签语义化</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_6-canvas画布" class="sidebar-link">6. canvas画布</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_6-1-基本用法" class="sidebar-link">6.1 基本用法</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_6-2-2d上下文" class="sidebar-link">6.2 2D上下文</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_6-3-绘制矩形" class="sidebar-link">6.3 绘制矩形</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_6-4-绘制路径" class="sidebar-link">6.4 绘制路径</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_6-5-绘制文本" class="sidebar-link">6.5 绘制文本</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_6-6-变换" class="sidebar-link">6.6 变换</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_6-7-阴影" class="sidebar-link">6.7 阴影</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_6-8-渐变" class="sidebar-link">6.8 渐变</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_6-9-合成" class="sidebar-link">6.9 合成</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_7-audio-video标签" class="sidebar-link">7. audio,video标签</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_8-h5上传" class="sidebar-link">8. H5上传</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_8-1-上传图片" class="sidebar-link">8.1 上传图片</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_8-2-上传文本" class="sidebar-link">8.2 上传文本</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_8-3-全屏显示" class="sidebar-link">8.3 全屏显示</a></li><li class="sidebar-sub-header"><a href="/docs/css/H5.html#_8-4-网络检测" class="sidebar-link">8.4 网络检测</a></li></ul></li></ul></li><li><a href="/docs/css/" class="sidebar-link">css相关</a></li><li><a href="/docs/css/css收集.html" class="sidebar-link">css样式收集</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="h5"><a href="#h5" class="header-anchor">#</a> H5</h1> <p><a href="https://www.w3cschool.cn/html5_reference.html" target="_blank" rel="noopener noreferrer">W3C文档地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.runoob.com/html/html-tutorial.html" target="_blank" rel="noopener noreferrer">菜鸟教程地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_1-dataset"><a href="#_1-dataset" class="header-anchor">#</a> 1. dataset</h2> <p><strong>html5 规定可以为元素添加非标准属性，以前缀 <code>data-</code> 开头，目的为元素提供与渲染无关的信息或提供语义信息</strong>。</p> <p>节点上面的所有非法属性都存储在 <strong>dom.dataset</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>container<span class="token punctuation">'</span></span> <span class="token attr-name">data-myName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>shiyue<span class="token punctuation">'</span></span> <span class="token attr-name">data-myAge</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>19<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> oDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取非法属性名</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oDiv<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>myName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//设置非法属性名</span>
oDiv<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>myName <span class="token operator">=</span> <span class="token string">'我是修改后的非法属性名'</span>
<span class="token comment">//删除非法属性名</span>
<span class="token keyword">delete</span> oDiv<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>myName
<span class="token comment">//增加非法属性名</span>
oDiv<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>new <span class="token operator">=</span> <span class="token string">'shiyue'</span>
</code></pre></div><h2 id="_2-classlist"><a href="#_2-classlist" class="header-anchor">#</a> 2. classList</h2> <p><code>Html5</code> 新增操作类名的方式，为所有元素添加 <code>classList</code> 属性。</p> <ul><li>add(value)：将给定字符串添加到列表中。如果值已存在，就不添加。</li> <li>contains(value)：表示列表中是否存在给定的值，存在返回 true ，反之返回 false 。</li> <li>remove(value)：从列表中删除给定的字符串。</li> <li>toggle(value)：如果列表中已经存在给定的值，删除它。不存在就添加它。</li></ul> <p>有了 classList 属性，除非需要删除某个元素所有类名，或者完全重写元素的 class 属性，否则就用不到 className 属性了。</p> <h2 id="_3-scrollintoview-方法"><a href="#_3-scrollintoview-方法" class="header-anchor">#</a> 3. scrollIntoView()方法</h2> <p>如何滚动页面，HTML5 将 scrollIntoView() 作为标准方法。</p> <p><strong>Element.scrollIntoView() 方法让当前的元素滚动到浏览器窗口的可视区域内</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>element<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 等同于element.scrollIntoView(true) </span>
element<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span>alignToTop<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Boolean型参数 </span>
element<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span>scrollIntoViewOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Object型参数</span>
</code></pre></div><h4 id="参数"><a href="#参数" class="header-anchor">#</a> 参数</h4> <p><strong>alignToTop (Boolean型参数)</strong></p> <p>1.如果为true，元素的顶端将和其所在滚动区的可视区域的顶端对齐。</p> <p>2.如果为false，元素的底端将和其所在滚动区的可视区域的底端对齐。</p> <p><strong>scrollIntoViewOptions (Object型参数)</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    behavior<span class="token operator">:</span> <span class="token string">&quot;auto&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;smooth&quot;</span><span class="token punctuation">,</span><span class="token comment">//behavior对element.scroll({top,left,behavior})同样生效</span>
    block<span class="token operator">:</span>    <span class="token string">&quot;start&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;center&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span><span class="token comment">//定义处置方向对齐</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>1. 如果是一个 <code>boolean</code>，<code>true</code> 相当于<code>{block: &quot;start&quot;}</code>，<code>false</code> 相当于<code>{block: &quot;end&quot;}</code></strong></p> <p><strong>2. <code>behavior</code>这个选项决定页面是如何滚动的，实测<code>auto</code>与<code>instant</code>都是瞬间跳到相应的位置，而<code>smooth</code>就是有动画的过程</strong></p> <h4 id="示例1："><a href="#示例1：" class="header-anchor">#</a> 示例1：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

element<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>block<span class="token operator">:</span> <span class="token string">&quot;end&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>block<span class="token operator">:</span> <span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> behavior<span class="token operator">:</span> <span class="token string">&quot;smooth&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="示例2：模拟锚点"><a href="#示例2：模拟锚点" class="header-anchor">#</a> 示例2：模拟锚点</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>swiper<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">data-scrollele</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>item1<span class="token punctuation">'</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>handle(event)<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>跳转标题1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">data-scrollele</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>item2<span class="token punctuation">'</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>handle(event)<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>跳转标题1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--省略内容--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>item1<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>标题1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--省略内容--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>item2<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>标题2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--省略内容--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>scrollele<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> item <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.'</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>scrollele<span class="token punctuation">)</span><span class="token punctuation">;</span>
            item<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                behavior<span class="token operator">:</span><span class="token string">'smooth'</span><span class="token punctuation">,</span>
                block<span class="token operator">:</span><span class="token string">'start'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="示例三：返回顶部"><a href="#示例三：返回顶部" class="header-anchor">#</a> 示例三：返回顶部</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>swiper<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>top<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>btn<span class="token punctuation">'</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>backTop()<span class="token punctuation">'</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">='</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span>fixed<span class="token punctuation">;</span><span class="token property">right</span><span class="token punctuation">:</span>150px<span class="token punctuation">;</span><span class="token property">bottom</span><span class="token punctuation">:</span>200px</span><span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>返回顶部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--省略内容，假设高度足够高，超过100vh--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">backTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> _top <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.top'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _top<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            behavior<span class="token operator">:</span><span class="token string">'smooth'</span><span class="token punctuation">,</span>
            block<span class="token operator">:</span><span class="token string">'start'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        _top <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="注意"><a href="#注意" class="header-anchor">#</a> 注意</h4> <p>取决于其它元素的布局情况，此元素可能不会完全滚动到顶端或底端（比如，当元素处于页面尾部，没有足够的底部距离让他完全滚动到顶端）。</p> <h3 id="其他滚动方法"><a href="#其他滚动方法" class="header-anchor">#</a> 其他滚动方法</h3> <ul><li><code>scrollIntoViewIfNeeded(dlignCenter)</code>：只在当前元素在视口中不可见的情况下，才滚动浏览器窗口或容器元素，最终让他可见。如果当前元素在视口中，则这个方法什么也不会做。如果将可选的 alignCenter 参数设置为 true ，则表示尽量将元素显示在视口中部（垂直方向），Safari 和 Chrome 实现了这个方法。</li> <li><code>scrollBylines(lineCount)</code>：将元素的内容滚动指定的行高，lineCount 值可以是正值，也可以是负值。Safari和 Chrome 实现。</li> <li><code>scrollByPages(pageCount)</code>：将元素额的内容滚动指定的页面高度，具体高度由元素的高度决定。Safari 和 Chrome 实现。</li></ul> <blockquote><p>注意：scrollIntoView() 和 scrollIntoViewIfNeeded() 作用对象是元素的容器。</p> <p>而 scrollByLines() 和 scrollByPages() 影响的则是元素自身。</p></blockquote> <p>示例：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//将页面主体滚动5行</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">scrollByLines</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//当前元素不可见是，让他进入浏览器视口</span>
document<span class="token punctuation">.</span>images<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">scrollIntoViewIfNeeded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将页面主体往回滚动1页</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">scrollByPages</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>总之就是，scrollIntoView 是唯一一个所有浏览器都支持的方法。</strong></p> <h2 id="_4-数据持久化存储"><a href="#_4-数据持久化存储" class="header-anchor">#</a> 4. 数据持久化存储</h2> <p>es5中当浏览器的页面被关闭之后，JS脚本的所有数据都会从内存中销毁，存储到本地的数据  会有隐式转换成字符串，所以在<strong>存储数据之前需要使用JSON.stringify(数据)</strong></p> <h3 id="localstorage方法"><a href="#localstorage方法" class="header-anchor">#</a> localStorage方法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>属性名<span class="token punctuation">,</span>属性值<span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>属性名<span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>属性名<span class="token punctuation">)</span> <span class="token comment">//调用一次只能删除存在本地的一个数据</span>
localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">//删除存在本地的所有数据</span>
</code></pre></div><h3 id="sessionstorage方法"><a href="#sessionstorage方法" class="header-anchor">#</a> sessionStorage方法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>属性名<span class="token punctuation">)</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>属性名<span class="token punctuation">)</span> <span class="token comment">//调用一次只能删除存在本地的一个数据</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">//删除存在本地的所有数据</span>
</code></pre></div><p><strong>localStorage  和  sessionStorage的区别</strong></p> <p><code>localStorage</code>存储数据的生命周期 是永久的。</p> <p><code>sessionStorage</code>存储数据的生命周期，在当前的这次页面没有被关闭 会一直存在。</p> <p>这两种方式都是数据持久化的方式。</p> <h2 id="_5-新增标签"><a href="#_5-新增标签" class="header-anchor">#</a> 5. 新增标签</h2> <h3 id="_5-1-canvas"><a href="#_5-1-canvas" class="header-anchor">#</a> 5.1 canvas</h3> <p>标签定义图形，比如图表和其他图像。该标签基于 JavaScript 的绘图 API 。</p> <h3 id="_5-2-新多媒体元素"><a href="#_5-2-新多媒体元素" class="header-anchor">#</a> 5.2 新多媒体元素</h3> <p>audio定义音频内容。</p> <p>video定义视频（video 或者 movie）。</p> <h3 id="_5-3-datalist"><a href="#_5-3-datalist" class="header-anchor">#</a> 5.3 datalist</h3> <p>定义选项列表，与 input 元素配合使用该元素，来定义 input 可能的值。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">list</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>datalist</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>罗特<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>小勤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>小石头<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>逍遥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>后恶迷宫<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>愉快的沙果<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>阿发<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>datalist</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_5-4-progress"><a href="#_5-4-progress" class="header-anchor">#</a> 5.4 progress</h3> <p>进度条</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>progress</span> <span class="token attr-name">min</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>progress</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>进度条样式修改：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">progress</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 168px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span>#f00<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span>#EFEFF4<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.1rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 表示总长度背景色 */</span>
<span class="token selector">progress::-webkit-progress-bar</span><span class="token punctuation">{</span>     
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f2f2f2<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.2rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 表示已完成进度背景色 */</span>
<span class="token selector">progress::-webkit-progress-value</span><span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #a21211<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.2rem<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-5-新增标签-块级元素-标签语义化"><a href="#_5-5-新增标签-块级元素-标签语义化" class="header-anchor">#</a> 5.5 新增标签,(块级元素)标签语义化</h3> <p>article	标记定义一篇文章(容器)	//h2 p</p> <p>header	定义一个页面或一个区域的头部</p> <p>nav		定义导航链接</p> <p>section	相当于div</p> <p>aside	侧边栏</p> <p>figure	定义一组媒体内容以及他们的标题	//autio	video</p> <p>figcaption	figure的标题</p> <p>footer	定义一个页面或一个区域的底部</p> <p>datalist	列表</p> <h2 id="_6-canvas画布"><a href="#_6-canvas画布" class="header-anchor">#</a> 6. canvas画布</h2> <h3 id="_6-1-基本用法"><a href="#_6-1-基本用法" class="header-anchor">#</a> 6.1 基本用法</h3> <p><strong>canvas	支持宽高</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>canvas width<span class="token operator">=</span><span class="token string">&quot;500&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;400&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;canvas&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>canvas<span class="token operator">&gt;</span>
</code></pre></div><p><strong>获取画布</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//确定浏览器支持</span>
    <span class="token comment">//获取2D画笔</span>
    <span class="token keyword">var</span> cxt <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>toDataURL()</code> 导出 <code>&lt;canvas&gt;</code> 元素上绘制的图像</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//取得图像数据</span>
<span class="token keyword">var</span> imgURL <span class="token operator">=</span> cxt<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">'image/png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//显示图像</span>
<span class="token keyword">var</span> image <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
image<span class="token punctuation">.</span>src <span class="token operator">=</span> imgURL<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>默认情况，浏览器会将图像编码为 png 格式。</p> <h3 id="_6-2-2d上下文"><a href="#_6-2-2d上下文" class="header-anchor">#</a> 6.2 2D上下文</h3> <p>2D上下文的坐标开始于 <code>canvas</code> 元素左上角,原点坐标（0,0）。所有坐标值都基于原点计算，x越大越靠右，y越大越靠下。默认情况下，宽高即可表示水平和垂直两个方向上可用像素数目。</p> <p>填充和描边</p> <ul><li>填充 fillStyle ：用指定的样式（颜色、渐变或图像）填充图形。</li> <li>描边 strokeStyle ：只在图形的边缘划线。</li></ul> <p>值可以是字符串、渐变对象或模式对象。默认值都是‘#000000’。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//确定浏览器支持</span>
    <span class="token comment">//获取2D画笔</span>
    <span class="token keyword">var</span> cxt <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置线宽</span>
    cxt<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">20</span>
    <span class="token comment">//设置画笔颜色</span>
    cxt<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span><span class="token comment">//填充，只给颜色相当于实心画笔</span>
    cxt<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'blue'</span><span class="token comment">//描边，空心画笔</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-3-绘制矩形"><a href="#_6-3-绘制矩形" class="header-anchor">#</a> 6.3 绘制矩形</h3> <p>矩形相关方法</p> <p>一下三个方法都能接受四个参数：（x，y，width，height）;</p> <ul><li>fillRect() 在画布上绘制的矩形会填充指定颜色，颜色通过 fillStyle 指定。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//确定浏览器支持</span>
    <span class="token keyword">var</span> cxt <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取得2d上下文对象</span>
    cxt<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//坐标（60,60），宽60高30</span>
    cxt<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//坐标（70,70），宽60高30</span>
    <span class="token comment">//从表现来看，后面绘制的图形显示层级高</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="/docs/css/cxt矩形01.png" alt="矩形绘图"> <ul><li>strokeRect() 在画布上绘制的矩形会使用指定的颜色描边，颜色通过 strokeStyle指定。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//确定浏览器支持</span>
   <span class="token keyword">var</span> cxt <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取得2d上下文对象</span>
    cxt<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//坐标（60,60），宽60高30</span>
    cxt<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//坐标（70,70），宽60高30</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="/docs/css/cxt矩形02.png" alt="矩形绘图"> <ul><li>clearRect() 用于清除画布上的矩形区域。本质上这个方法可以把回执上下文中的某一矩形区域变透明。通过绘制形状在清除指定区域，例如将重合部分切掉。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//确定浏览器支持</span>
    <span class="token keyword">var</span> cxt <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取得2d上下文对象</span>
    cxt<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//切掉重合部分</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="/docs/css/cxt矩形03.png" alt="矩形绘图"> <h3 id="_6-4-绘制路径"><a href="#_6-4-绘制路径" class="header-anchor">#</a> 6.4 绘制路径</h3> <p>2D绘制上下文支持很多在画布上绘制路径的方法。先调用 beginPath() 表示要开始绘制新路径。再通过以下方法绘制。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>500px<span class="token punctuation">'</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>500px<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>drawing<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>arc(x，y，radius，startAngle，endAngle，counterclockwise)：以（x，y）为圆心绘制一条<strong>弧线</strong>，弧线半径为 radius ，起始角度 startAngle ，结束角度 endAngle ，最后一个参数表示是否按逆时针方向计算，false 表示顺时针计算。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//确定浏览器支持</span>
    <span class="token keyword">var</span> cxt <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取得2d上下文对象</span>
    cxt<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//开始绘制新路径</span>
    cxt<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//圆心（100,100），半径100，起始角度0，结束角度π，顺时针</span>
    cxt<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span>；<span class="token comment">//填充颜色红色</span>
    cxt<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>；<span class="token comment">//绘制填充</span>
    <span class="token comment">//cxt.strokeStyle = 'red';//描边颜色</span>
    <span class="token comment">//cxt.stroke();//绘制弧线</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="/docs/css/cxt绘制填充01.png" alt="绘制弧形填充"> <img src="/docs/css/cxt绘制弧线01.png" alt="绘制弧线"> <ul><li>arcTo(x1，y1，x2，y2，radius)：<strong>从上一点开始绘制一条弧线</strong>，到(x2，y2)为止，并且以给定半径 radius 穿过（x1，y1）。</li> <li>bezierCurveTo(c1x，c1y，c2x，c2y，x，y)：<strong>从上一点开始绘制一条曲线</strong>，到（x，y）为止，并且以（c1x，c1y）和（c2x，c2y）为控制点。</li> <li>lineTo(x，y)：<strong>从上一点开始绘制一条直线</strong>，到（x，y）为止。</li> <li>moveTo(x，y)：将<strong>绘图游标移动</strong>到（x，y），不划线。</li> <li>quadraticCurveTo(cx，cy，x，y)：<strong>从上一点开始绘制一条二次曲线</strong>，到（x，y）为止，并且以（cx，cy）为控制点。</li> <li>rect(x，y，width，height)：<strong>从点（x，y）开始绘制一个矩形，指定宽</strong>。这个方法是绘制路径，而不是 strokeRect() 和 fillRect()  所绘制的独立形状。</li></ul> <p>路径创建以后可以：</p> <ul><li>closePath() 结束路径</li> <li>fill() 填充</li> <li>stroke() 描边</li> <li>clip() 可以在路径上创建一个剪切区域</li></ul> <p>绘制一个不带数字的时钟表盘</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//确定浏览器支持</span>
    <span class="token keyword">var</span> cxt <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取得2d上下文对象</span>
    cxt<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//绘制外圆</span>
    cxt<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">196</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//移动游标到（196,100）</span>
    cxt<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">96</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//绘制内圆</span>
    cxt<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//移动游标到（100,100）</span>
    cxt<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//绘制时针</span>
    cxt<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//移动游标到（100,100）</span>
    cxt<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//绘制分针</span>
    cxt<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="/docs/css/cxt绘制005.png" alt="canvas画圆"> <p>在2D绘图上下文中，路径是一种主要绘图方式，因为路径能给要绘制的图形提供更多控制。由于路径的使用很频繁，所以有 isPointInPath(x，y) 方法。用于确定路径关闭之前画布上的某一点是否位于路径上。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span><span class="token punctuation">(</span>cxt<span class="token punctuation">.</span><span class="token function">isPointInPath</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-5-绘制文本"><a href="#_6-5-绘制文本" class="header-anchor">#</a> 6.5 绘制文本</h3> <p>绘制文本主要有两个方法：</p> <p>fillText() 和 strokeText()，参数（str，x，y，width）str要绘制的文本字符串，(x,y)坐标，width 最大像素宽度</p> <p>基础属性三个：</p> <ul><li>font：表示文本样式，大小，字体，用CSS指定字体的格式，例 '10px Arial'</li> <li>textAlign：文本对齐方式。“start，end，left，right，center”。建议使用 start 和 end 更为稳妥，符合从左到右从右到左显示（阅读）的语言。</li> <li>textBaseline：文本基线，“top，hanging，middle，alphabetic，ideographic，bottom”</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//设置字体大小 和字体系列</span>
cxt<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">'20px 微软雅黑'</span>

<span class="token comment">//设置文字和绘制文字的x位置的对齐方式</span>
cxt<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'center'</span>     <span class="token comment">//常用</span>
cxt<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'left'</span>       <span class="token comment">//默认</span>
cxt<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'right'</span>

<span class="token comment">//设置文字和绘制文字的y位置的对齐方式</span>
cxt<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'bottom'</span>
<span class="token comment">//文字的最低部和绘制文字的y位置对齐</span>
cxt<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'middle'</span>   <span class="token comment">//常用</span>
<span class="token comment">//文字的最中间和绘制文字的y位置对齐</span>
cxt<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'top'</span>
<span class="token comment">//文字的最顶间和绘制文字的y位置对齐</span>
cxt<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'hanging'</span>

<span class="token comment">//设置文字阴影的水平偏移量</span>
cxt<span class="token punctuation">.</span>shadowOffsetX <span class="token operator">=</span> <span class="token number">10</span>

<span class="token comment">//设置文字阴影的竖直偏移量</span>
cxt<span class="token punctuation">.</span>shadowOffsetY <span class="token operator">=</span> <span class="token number">10</span>

<span class="token comment">//设置文字阴影的颜色</span>
cxt<span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> <span class="token string">'rgba(255,0,0,0.5)'</span>

<span class="token comment">//设置文字阴影的模糊程度</span>
cxt<span class="token punctuation">.</span>shadowBlur <span class="token operator">=</span> <span class="token number">0.2</span>

<span class="token comment">//绘制文字</span>
cxt<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">'lalala'</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_6-6-变换"><a href="#_6-6-变换" class="header-anchor">#</a> 6.6 变换</h3> <p>通过上下文的变换，可以把处理后的图像绘制到画布上2D绘制上下文支持各种基本的绘制变换。创建绘制上下文时，会以默认值初始化变换矩阵，在默认的变换矩阵下，所有处理都按描述直接绘制。为绘制上下文应用变化，会导致使用不同的变换矩阵应用处理，从而产生不同的结果。</p> <ul><li>rotate(angle)：围绕原点旋转图像</li> <li>scale(scaleX，scaleY)：缩放。默认值为1</li> <li>translate(x，y)：将坐标原点移动到(x，y)</li> <li>transform(m1_1，m1_2，m2_1，m2_2，dx，dy)：直接修改变换矩阵，方式是乘以如下矩阵</li></ul> <table><thead><tr><th style="text-align:center;">m1_1</th> <th style="text-align:center;">m1_2</th> <th style="text-align:center;">dx</th></tr></thead> <tbody><tr><td style="text-align:center;">m2_1</td> <td style="text-align:center;">m2_2</td> <td style="text-align:center;">dy</td></tr> <tr><td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">1</td></tr></tbody></table> <ul><li>setTransform()：将变换矩阵重置为默认状态，然后再调用 transform()</li></ul> <p>绘制时钟表针，如果把原点变换到表盘中心，会变简单。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> cxt <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取得2d上下文对象</span>
    cxt<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//开始</span>
    cxt<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//外圆</span>
    cxt<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">190</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//内圆</span>
    cxt<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将绘图原点变换到圆心</span>
    <span class="token comment">//cxt.rotate(1);//旋转表针</span>
    <span class="token comment">//绘制分针</span>
    cxt<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">85</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//绘制时针</span>
    cxt<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//描边路径</span>
    cxt<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="/docs/css/cxt变换02.png" alt="表针"> <img src="/docs/css/cxt变换rotate01.png" alt="表针旋转"> <h3 id="_6-7-阴影"><a href="#_6-7-阴影" class="header-anchor">#</a> 6.7 阴影</h3> <p>2D上下文会根据以下几个属性的值，自动为形状或路径绘制出阴影。</p> <ul><li>shadowColor：用CSS颜色格式表示阴影颜色，默认黑色。</li> <li>shadowOffsetX：形状或路径X轴方向的阴影偏移量，默认为0。</li> <li>shadowOffsetY：形状或路径Y轴方向的阴影偏移量，默认为0。</li> <li>shadowBlur：模糊的像素数，默认0，即不模糊。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> cxt <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取得2d上下文对象</span>
    cxt<span class="token punctuation">.</span>shadowOffsetX <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>shadowOffsetY <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>shadowBlur <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> <span class="token string">'rgba(255,0,0,.7)'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">'70px 微软雅黑'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'center'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'top'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">'十月'</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="/docs/css/cxt阴影十月.png" alt="cxt阴影十月.png"> <h3 id="_6-8-渐变"><a href="#_6-8-渐变" class="header-anchor">#</a> 6.8 渐变</h3> <p>渐变由 CanvasGradient 实例表示，要创建一个新的线性渐变可以调用 <strong>createLinearGradient() 方法</strong>。接收四个参数（x1，y1，x2，y2），起点坐标（x1，y1），终点坐标（x2，y2）。</p> <p><code>gradient.addColorStop()</code>指定渐变标色，第一个参数色标位置（0~1），第二个参数 CSS 颜色值。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> cxt <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取得2d上下文对象</span>
    <span class="token keyword">var</span> gradient <span class="token operator">=</span> cxt<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'white'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'rgba(255,0,0,1)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//绘制红色矩形</span>
    cxt<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(255,0,0,1)'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//绘制渐变矩形</span>
    cxt<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> gradient<span class="token punctuation">;</span><span class="token comment">//应用渐变色填充</span>
    cxt<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="/docs/css/cxt渐变01.png" alt="cxt渐变01.png"> <p>渐变文字</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> cxt <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取得2d上下文对象</span>
    <span class="token keyword">var</span> gradient <span class="token operator">=</span> cxt<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token string">'#E71D36'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token string">'#2EC4B6'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token string">'#F16B6F'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>shadowOffsetX <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>shadowOffsetY <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>shadowBlur <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> <span class="token string">'#F16B6F'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">'600 80px 微软雅黑'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'center'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'hanging'</span><span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> gradient<span class="token punctuation">;</span>
    cxt<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">'十月clearlove'</span><span class="token punctuation">,</span><span class="token number">280</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="/docs/css/cxt渐变文字03.png" alt="cxt渐变文字03.png"> <h3 id="_6-9-合成"><a href="#_6-9-合成" class="header-anchor">#</a> 6.9 合成</h3> <p>两个应用到2D上下文中所有绘制操作的属性：</p> <h4 id="_1-globalalpha：透明度（0-1）"><a href="#_1-globalalpha：透明度（0-1）" class="header-anchor">#</a> 1. globalAlpha：透明度（0~1）</h4> <h4 id="_2-globalcompositionoperation：表示后绘制的图形怎样与先绘制的图形结合。有多个值："><a href="#_2-globalcompositionoperation：表示后绘制的图形怎样与先绘制的图形结合。有多个值：" class="header-anchor">#</a> 2. globalCompositionOperation：表示后绘制的图形怎样与先绘制的图形结合。有多个值：</h4> <ul><li>sourse-over：默认值，后绘制的图形至于先绘制的图形上方。</li> <li>sourse-in：重叠部分可见，其他部分完全透明。</li> <li>sourse-out：重叠部分可见，先绘制的图形完全透明。</li> <li>source-atop：重叠部分可见，先绘制的图形不受影响。</li> <li>destination-over：后绘制的图形至于先绘制图形下方，只有之前透明像素下的部分可见。</li> <li>destination-in：后绘制图形置于下方，两者不重叠部分完全透明。</li> <li>destination-out：后绘制的图形擦除与先绘制的图形重叠部分。</li> <li>destination-atop：后绘制的图形至于下方，两者不重叠的地方，先绘制的图形完全透明。</li> <li>lighter：后绘制的图形与先绘制的图形重叠部分值相加，使该部分变亮。</li> <li>copy：后绘制的图形完全替代与之重叠的先绘制图形。</li> <li>xor：后绘制图形与先绘制图形重叠部分执行“异或”操作。</li></ul> <h2 id="_7-audio-video标签"><a href="#_7-audio-video标签" class="header-anchor">#</a> 7. audio,video标签</h2> <h4 id="audio-video提供的属性方法通用"><a href="#audio-video提供的属性方法通用" class="header-anchor">#</a> audio video提供的属性方法通用</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>audio src<span class="token operator">=</span><span class="token string">&quot;audio/1.mp3&quot;</span> controls<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>audio<span class="token operator">&gt;</span>
</code></pre></div><p>audio 在页面中插入一段音频 ，默认不可见，必须加上controls才可见控件。</p> <p>移动端不能自动播放，或报错问题，设置静音<code>muted</code>，或让用户手动触发播放。</p> <p><strong><code>audio video</code>标签属性</strong>：</p> <ul><li>controls：显示浏览器默认播放控件，自定义播放器不需要<code>controls</code>，通过自定义UI和交互控制播放。</li> <li>poster：给视频添加海报。</li> <li>loop：循环播放。</li> <li>muted：静音。</li></ul> <p><strong><code>audio video</code>提供的事件</strong>：</p> <ul><li>oncanplay：视频/音频加载好，准备好播放会触发回调函数。</li> <li>onplay：从<strong>暂停切换到播放</strong>状态时触发。</li> <li>onpause：从<strong>播放切换到暂停</strong>状态时触发。</li> <li>timeupdate：播放时间进度发生变化时触发，可以根据这个方法监测进度，实现进度条。</li> <li>onended：当<strong>播放完成时</strong>触发。</li></ul> <p><strong><code>audio video</code>提供的方法</strong>：</p> <ul><li>play：播放。</li> <li>pause：暂停。</li> <li>load：重载。</li></ul> <p><strong><code>audio video</code>提供的属性</strong>：</p> <ul><li>currentTime：用于<strong>获取播放进度时间或修改进度</strong>实现跳转。</li> <li>duration：audio 歌曲<strong>总时长</strong>，秒为单位，小数。</li> <li>volume：控制播放<strong>音量</strong>（0~1）。默认为1，声音很大，最好初始设置小一点，后面让用户主动控制。</li> <li>playbackRate：控制播放速度，默认为1。</li></ul> <p><strong>示例控制播放</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>audio src<span class="token operator">=</span><span class="token string">&quot;./music/全世界宣布爱你.m4a&quot;</span> controls<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>audio<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">'btnPlay'</span><span class="token operator">&gt;</span>播放<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">'btnPause'</span><span class="token operator">&gt;</span>暂停<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">'btnJump'</span><span class="token operator">&gt;</span>前进<span class="token number">20</span>s<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">'btnVolumeAdd'</span><span class="token operator">&gt;</span>音量<span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">'btnVolumeMinus'</span><span class="token operator">&gt;</span>音量<span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">'btnSpeed'</span><span class="token operator">&gt;</span><span class="token number">1.2</span>倍速<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btnReload&quot;</span><span class="token operator">&gt;</span>重新加载<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">const</span> myAudio <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'audio'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btnPlay<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    myAudio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btnPause<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    myAudio<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btnJump<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    myAudio<span class="token punctuation">.</span>currentTime <span class="token operator">+=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    myAudio<span class="token punctuation">.</span>paused<span class="token operator">?</span>myAudio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">//从播放状态跳转进度，播放没问题，暂停状态跳转需要触发播放</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btnVolumeAdd<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    myAudio<span class="token punctuation">.</span>volume<span class="token operator">&lt;</span><span class="token number">0.9</span><span class="token operator">?</span><span class="token punctuation">(</span>myAudio<span class="token punctuation">.</span>volume <span class="token operator">+=</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btnVolumeMinus<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    myAudio<span class="token punctuation">.</span>volume<span class="token operator">&gt;</span><span class="token number">0.1</span><span class="token operator">?</span><span class="token punctuation">(</span>myAudio<span class="token punctuation">.</span>volume <span class="token operator">-=</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btnSpeed<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    myAudio<span class="token punctuation">.</span>playbackRate <span class="token operator">=</span> <span class="token number">1.2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btnReload<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    myAudio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_8-h5上传"><a href="#_8-h5上传" class="header-anchor">#</a> 8. H5上传</h2> <h3 id="_8-1-上传图片"><a href="#_8-1-上传图片" class="header-anchor">#</a> 8.1 上传图片</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//&lt;input type=&quot;file&quot; multiple&gt;    </span>
<span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span>
<span class="token comment">//当文件上传时 会触发回调函数</span>
input<span class="token punctuation">.</span><span class="token function-variable function">onchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件上传了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//files上传文件的集合</span>
	<span class="token keyword">var</span> file <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
	<span class="token comment">//生成一个有读取文件能力的对象</span>
	<span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//读取图片</span>
	reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>
	<span class="token comment">//等文件读取对象  读完了file的数据之后  会触发onload事件</span>
	reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件读取完成'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//以base64位存储在result中</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span>
		<span class="token comment">//创建img节点  document.createElement('img')</span>
		<span class="token keyword">var</span> oImg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		oImg<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token punctuation">;</span>   <span class="token comment">//异步代码</span>
		oImg<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
		oImg<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-2-上传文本"><a href="#_8-2-上传文本" class="header-anchor">#</a> 8.2 上传文本</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//&lt;input type=&quot;file&quot; multiple&gt;</span>
<span class="token comment">//&lt;div id=&quot;box&quot;&gt;&lt;/div&gt;</span>
<span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> oBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span>
<span class="token comment">//当文件上传时 会触发回调函数</span>
input<span class="token punctuation">.</span><span class="token function-variable function">onchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件上传了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> file <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//生成一个有读取文件能力的对象</span>
	<span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//读取文本</span>
	reader<span class="token punctuation">.</span><span class="token function">readAsText</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>
	reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//console.log(this.result)</span>
	oBox<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-3-全屏显示"><a href="#_8-3-全屏显示" class="header-anchor">#</a> 8.3 全屏显示</h3> <p>HTML5  规定了任何<strong>元素</strong>都可以全屏显示</p> <ul><li>requestFullScreen，让元素全屏显示  必须加上不同的浏览器的兼容前缀。</li> <li>cancelFullScreen，取消全屏显示，只能是document这个对象调用。</li> <li>isFullScreen，判断当前是否全屏。</li></ul> <p>兼容前缀：</p> <ul><li>谷歌浏览器  <strong>webkit</strong></li> <li>火狐浏览器  <strong>moz</strong></li> <li>欧朋        <strong>o</strong></li> <li>IE          <strong>ms</strong></li></ul> <p>全屏状态会激活选择器**#box:-webkit-full-screen{}**</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//示例:google浏览器</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;box&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;./12.jpg&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;full&quot;</span><span class="token operator">&gt;</span>全屏显示<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;cancel&quot;</span><span class="token operator">&gt;</span>退出全屏<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;isFull&quot;</span><span class="token operator">&gt;</span>是否全屏<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token keyword">var</span> oFull <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'full'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> oCancel <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'cancel'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> isFull <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'isFull'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> oImg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> oBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span>
oFull<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    oBox<span class="token punctuation">.</span><span class="token function">webkitRequestFullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//全屏</span>
<span class="token punctuation">}</span>
oCancel<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	document<span class="token punctuation">.</span><span class="token function">webkitCancelFullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//取消全屏</span>
<span class="token punctuation">}</span>
isFull<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>webkitIsFullScreen<span class="token punctuation">)</span><span class="token comment">//是否全屏</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-4-网络检测"><a href="#_8-4-网络检测" class="header-anchor">#</a> 8.4 网络检测</h3> <p>H5 提供了检测设备网络状态的事件</p> <ul><li><strong>online</strong>  当从断网到连网，会触发回调函数。</li> <li><strong>offline</strong>  当从连网到断网，会触发回调函数。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;tips&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./jq.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token comment">//jquery</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行'</span><span class="token punctuation">)</span>
		<span class="token comment">//tips淡入  2000ms 之后淡出</span>
		<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#tips'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'恭喜你，网络已重连'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//tips淡入  2000ms 之后淡出</span>
		<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#tips'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'对不住了，网络已断开'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020-5-17 0:07:59</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/css/html.html" class="prev">
        html拨云见日
      </a></span> <span class="next"><a href="/docs/css/" class="router-link-active">
        css相关
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.ca99be60.js" defer></script><script src="/docs/assets/js/2.f90869d3.js" defer></script><script src="/docs/assets/js/27.cc2178c9.js" defer></script>
  </body>
</html>
